var I$=Object.create;var{defineProperty:e,getPrototypeOf:L$,getOwnPropertyNames:g8,getOwnPropertyDescriptor:V$}=Object,v8=Object.prototype.hasOwnProperty;var y0=($,Q,G)=>{G=$!=null?I$(L$($)):{};const Y=Q||!$||!$.__esModule?e(G,"default",{value:$,enumerable:!0}):G;for(let Z of g8($))if(!v8.call(Y,Z))e(Y,Z,{get:()=>$[Z],enumerable:!0});return Y},o=($)=>{const Q=o.moduleCache??=new WeakMap;var G=Q.get($);if(G)return G;var Y=e({},"__esModule",{value:!0}),Z={enumerable:!1};if($&&typeof $==="object"||typeof $==="function"){for(let W of g8($))if(!v8.call(Y,W))e(Y,W,{get:()=>$[W],enumerable:!(Z=V$($,W))||Z.enumerable})}return Q.set($,Y),Y};var R=($,Q)=>()=>(Q||$((Q={exports:{}}).exports,Q),Q.exports);var h8=($,Q)=>{for(var G in Q)e($,G,{get:Q[G],enumerable:!0,configurable:!0,set:(Y)=>Q[G]=()=>Y})};var y8=($,Q)=>()=>($&&(Q=$($=0)),Q);var c0={};h8(c0,{__values:()=>{{return l0}},__spreadArrays:()=>{{return k$}},__spread:()=>{{return j$}},__rest:()=>{{return q$}},__read:()=>{{return c8}},__param:()=>{{return _$}},__metadata:()=>{{return C$}},__makeTemplateObject:()=>{{return v$}},__importStar:()=>{{return h$}},__importDefault:()=>{{return y$}},__generator:()=>{{return f$}},__extends:()=>{{return E$}},__exportStar:()=>{{return D$}},__decorate:()=>{{return B$}},__createBinding:()=>{{return O$}},__classPrivateFieldSet:()=>{{return m$}},__classPrivateFieldGet:()=>{{return b$}},__awaiter:()=>{{return S$}},__await:()=>{{return u}},__asyncValues:()=>{{return g$}},__asyncGenerator:()=>{{return N$}},__asyncDelegator:()=>{{return P$}},__assign:()=>{{return x0}}});function E$($,Q){m0($,Q);function G(){this.constructor=$}$.prototype=Q===null?Object.create(Q):(G.prototype=Q.prototype,new G)}function q$($,Q){var G={};for(var Y in $)if(Object.prototype.hasOwnProperty.call($,Y)&&Q.indexOf(Y)<0)G[Y]=$[Y];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Z=0,Y=Object.getOwnPropertySymbols($);Z<Y.length;Z++)if(Q.indexOf(Y[Z])<0&&Object.prototype.propertyIsEnumerable.call($,Y[Z]))G[Y[Z]]=$[Y[Z]]}return G}function B$($,Q,G,Y){var Z=arguments.length,W=Z<3?Q:Y===null?Y=Object.getOwnPropertyDescriptor(Q,G):Y,J;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")W=Reflect.decorate($,Q,G,Y);else for(var X=$.length-1;X>=0;X--)if(J=$[X])W=(Z<3?J(W):Z>3?J(Q,G,W):J(Q,G))||W;return Z>3&&W&&Object.defineProperty(Q,G,W),W}function _$($,Q){return function(G,Y){Q(G,Y,$)}}function C$($,Q){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata($,Q)}function S$($,Q,G,Y){function Z(W){return W instanceof G?W:new G(function(J){J(W)})}return new(G||(G=Promise))(function(W,J){function X(K){try{U(Y.next(K))}catch(H){J(H)}}function z(K){try{U(Y.throw(K))}catch(H){J(H)}}function U(K){K.done?W(K.value):Z(K.value).then(X,z)}U((Y=Y.apply($,Q||[])).next())})}function f$($,Q){var G={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,Z,W,J;return J={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(J[Symbol.iterator]=function(){return this}),J;function X(U){return function(K){return z([U,K])}}function z(U){if(Y)throw new TypeError("Generator is already executing.");while(G)try{if(Y=1,Z&&(W=U[0]&2?Z.return:U[0]?Z.throw||((W=Z.return)&&W.call(Z),0):Z.next)&&!(W=W.call(Z,U[1])).done)return W;if(Z=0,W)U=[U[0]&2,W.value];switch(U[0]){case 0:case 1:W=U;break;case 4:return G.label++,{value:U[1],done:!1};case 5:G.label++,Z=U[1],U=[0];continue;case 7:U=G.ops.pop(),G.trys.pop();continue;default:if((W=G.trys,!(W=W.length>0&&W[W.length-1]))&&(U[0]===6||U[0]===2)){G=0;continue}if(U[0]===3&&(!W||U[1]>W[0]&&U[1]<W[3])){G.label=U[1];break}if(U[0]===6&&G.label<W[1]){G.label=W[1],W=U;break}if(W&&G.label<W[2]){G.label=W[2],G.ops.push(U);break}if(W[2])G.ops.pop();G.trys.pop();continue}U=Q.call($,G)}catch(K){U=[6,K],Z=0}finally{Y=W=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}function O$($,Q,G,Y){if(Y===void 0)Y=G;$[Y]=Q[G]}function D$($,Q){for(var G in $)if(G!=="default"&&!Q.hasOwnProperty(G))Q[G]=$[G]}function l0($){var Q=typeof Symbol==="function"&&Symbol.iterator,G=Q&&$[Q],Y=0;if(G)return G.call($);if($&&typeof $.length==="number")return{next:function(){if($&&Y>=$.length)$=void 0;return{value:$&&$[Y++],done:!$}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function c8($,Q){var G=typeof Symbol==="function"&&$[Symbol.iterator];if(!G)return $;var Y=G.call($),Z,W=[],J;try{while((Q===void 0||Q-- >0)&&!(Z=Y.next()).done)W.push(Z.value)}catch(X){J={error:X}}finally{try{if(Z&&!Z.done&&(G=Y.return))G.call(Y)}finally{if(J)throw J.error}}return W}function j$(){for(var $=[],Q=0;Q<arguments.length;Q++)$=$.concat(c8(arguments[Q]));return $}function k$(){for(var $=0,Q=0,G=arguments.length;Q<G;Q++)$+=arguments[Q].length;for(var Y=Array($),Z=0,Q=0;Q<G;Q++)for(var W=arguments[Q],J=0,X=W.length;J<X;J++,Z++)Y[Z]=W[J];return Y}function u($){return this instanceof u?(this.v=$,this):new u($)}function N$($,Q,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y=G.apply($,Q||[]),Z,W=[];return Z={},J("next"),J("throw"),J("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function J(F){if(Y[F])Z[F]=function(I){return new Promise(function(L,V){W.push([F,I,L,V])>1||X(F,I)})}}function X(F,I){try{z(Y[F](I))}catch(L){H(W[0][3],L)}}function z(F){F.value instanceof u?Promise.resolve(F.value.v).then(U,K):H(W[0][2],F)}function U(F){X("next",F)}function K(F){X("throw",F)}function H(F,I){if(F(I),W.shift(),W.length)X(W[0][0],W[0][1])}}function P$($){var Q,G;return Q={},Y("next"),Y("throw",function(Z){throw Z}),Y("return"),Q[Symbol.iterator]=function(){return this},Q;function Y(Z,W){Q[Z]=$[Z]?function(J){return(G=!G)?{value:u($[Z](J)),done:Z==="return"}:W?W(J):J}:W}}function g$($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=$[Symbol.asyncIterator],G;return Q?Q.call($):($=typeof l0==="function"?l0($):$[Symbol.iterator](),G={},Y("next"),Y("throw"),Y("return"),G[Symbol.asyncIterator]=function(){return this},G);function Y(W){G[W]=$[W]&&function(J){return new Promise(function(X,z){J=$[W](J),Z(X,z,J.done,J.value)})}}function Z(W,J,X,z){Promise.resolve(z).then(function(U){W({value:U,done:X})},J)}}function v$($,Q){if(Object.defineProperty)Object.defineProperty($,"raw",{value:Q});else $.raw=Q;return $}function h$($){if($&&$.__esModule)return $;var Q={};if($!=null){for(var G in $)if(Object.hasOwnProperty.call($,G))Q[G]=$[G]}return Q.default=$,Q}function y$($){return $&&$.__esModule?$:{default:$}}function b$($,Q){if(!Q.has($))throw new TypeError("attempted to get private field on non-instance");return Q.get($)}function m$($,Q,G){if(!Q.has($))throw new TypeError("attempted to set private field on non-instance");return Q.set($,G),G}var m0,x0;var d0=y8(()=>{/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */m0=function($,Q){return m0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var Z in Y)if(Y.hasOwnProperty(Z))G[Z]=Y[Z]},m0($,Q)},x0=function(){return x0=Object.assign||function $(Q){for(var G,Y=1,Z=arguments.length;Y<Z;Y++){G=arguments[Y];for(var W in G)if(Object.prototype.hasOwnProperty.call(G,W))Q[W]=G[W]}return Q},x0.apply(this,arguments)}});var r8=R((d8)=>{Object.defineProperty(d8,"__esModule",{value:!0});d8.toUtf8=d8.fromUtf8=void 0;var x$=($)=>{const Q=[];for(let G=0,Y=$.length;G<Y;G++){const Z=$.charCodeAt(G);if(Z<128)Q.push(Z);else if(Z<2048)Q.push(Z>>6|192,Z&63|128);else if(G+1<$.length&&(Z&64512)===55296&&($.charCodeAt(G+1)&64512)===56320){const W=65536+((Z&1023)<<10)+($.charCodeAt(++G)&1023);Q.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else Q.push(Z>>12|224,Z>>6&63|128,Z&63|128)}return Uint8Array.from(Q)};d8.fromUtf8=x$;var l$=($)=>{let Q="";for(let G=0,Y=$.length;G<Y;G++){const Z=$[G];if(Z<128)Q+=String.fromCharCode(Z);else if(192<=Z&&Z<224){const W=$[++G];Q+=String.fromCharCode((Z&31)<<6|W&63)}else if(240<=Z&&Z<365){const J="%"+[Z,$[++G],$[++G],$[++G]].map((X)=>X.toString(16)).join("%");Q+=decodeURIComponent(J)}else Q+=String.fromCharCode((Z&15)<<12|($[++G]&63)<<6|$[++G]&63)}return Q};d8.toUtf8=l$});var p8=R((i8)=>{var d$=function($){return(new TextEncoder()).encode($)},s$=function($){return new TextDecoder("utf-8").decode($)};Object.defineProperty(i8,"__esModule",{value:!0});i8.toUtf8=i8.fromUtf8=void 0;i8.fromUtf8=d$;i8.toUtf8=s$});var t8=R((o8)=>{Object.defineProperty(o8,"__esModule",{value:!0});o8.toUtf8=o8.fromUtf8=void 0;var n8=r8(),e8=p8(),i$=($)=>typeof TextEncoder==="function"?(0,e8.fromUtf8)($):(0,n8.fromUtf8)($);o8.fromUtf8=i$;var a$=($)=>typeof TextDecoder==="function"?(0,e8.toUtf8)($):(0,n8.toUtf8)($);o8.toUtf8=a$});var G1=R(($1)=>{var o$=function($){if($ instanceof Uint8Array)return $;if(typeof $==="string")return e$($);if(ArrayBuffer.isView($))return new Uint8Array($.buffer,$.byteOffset,$.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array($)};Object.defineProperty($1,"__esModule",{value:!0});$1.convertToBuffer=void 0;var n$=t8(),e$=typeof Buffer!=="undefined"&&Buffer.from?function($){return Buffer.from($,"utf8")}:n$.fromUtf8;$1.convertToBuffer=o$});var W1=R((Y1)=>{var u$=function($){if(typeof $==="string")return $.length===0;return $.byteLength===0};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.isEmptyData=void 0;Y1.isEmptyData=u$});var U1=R((J1)=>{var t$=function($){return new Uint8Array([($&4278190080)>>24,($&16711680)>>16,($&65280)>>8,$&255])};Object.defineProperty(J1,"__esModule",{value:!0});J1.numToUint8=void 0;J1.numToUint8=t$});var F1=R((z1)=>{var $Q=function($){if(!Uint32Array.from){var Q=new Uint32Array($.length),G=0;while(G<$.length)Q[G]=$[G],G+=1;return Q}return Uint32Array.from($)};Object.defineProperty(z1,"__esModule",{value:!0});z1.uint32ArrayFrom=void 0;z1.uint32ArrayFrom=$Q});var t=R((a)=>{Object.defineProperty(a,"__esModule",{value:!0});a.uint32ArrayFrom=a.numToUint8=a.isEmptyData=a.convertToBuffer=void 0;var QQ=G1();Object.defineProperty(a,"convertToBuffer",{enumerable:!0,get:function(){return QQ.convertToBuffer}});var GQ=W1();Object.defineProperty(a,"isEmptyData",{enumerable:!0,get:function(){return GQ.isEmptyData}});var YQ=U1();Object.defineProperty(a,"numToUint8",{enumerable:!0,get:function(){return YQ.numToUint8}});var ZQ=F1();Object.defineProperty(a,"uint32ArrayFrom",{enumerable:!0,get:function(){return ZQ.uint32ArrayFrom}})});var M1=R((L1)=>{Object.defineProperty(L1,"__esModule",{value:!0});L1.AwsCrc32=void 0;var H1=(d0(),o(c0)),s0=t(),I1=r0(),JQ=function(){function $(){this.crc32=new I1.Crc32}return $.prototype.update=function(Q){if((0,s0.isEmptyData)(Q))return;this.crc32.update((0,s0.convertToBuffer)(Q))},$.prototype.digest=function(){return H1.__awaiter(this,void 0,void 0,function(){return H1.__generator(this,function(Q){return[2,(0,s0.numToUint8)(this.crc32.digest())]})})},$.prototype.reset=function(){this.crc32=new I1.Crc32},$}();L1.AwsCrc32=JQ});var r0=R((i0)=>{var zQ=function($){return new R1().update($).digest()};Object.defineProperty(i0,"__esModule",{value:!0});i0.AwsCrc32=i0.Crc32=i0.crc32=void 0;var XQ=(d0(),o(c0)),UQ=t();i0.crc32=zQ;var R1=function(){function $(){this.checksum=4294967295}return $.prototype.update=function(Q){var G,Y;try{for(var Z=XQ.__values(Q),W=Z.next();!W.done;W=Z.next()){var J=W.value;this.checksum=this.checksum>>>8^FQ[(this.checksum^J)&255]}}catch(X){G={error:X}}finally{try{if(W&&!W.done&&(Y=Z.return))Y.call(Z)}finally{if(G)throw G.error}}return this},$.prototype.digest=function(){return(this.checksum^4294967295)>>>0},$}();i0.Crc32=R1;var KQ=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],FQ=(0,UQ.uint32ArrayFrom)(KQ),HQ=M1();Object.defineProperty(i0,"AwsCrc32",{enumerable:!0,get:function(){return HQ.AwsCrc32}})});var T0=R((Q7)=>{var oQ=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l1="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]["+oQ+"]*",uQ=new RegExp("^"+l1+"$"),tQ=function($,Q){const G=[];let Y=Q.exec($);while(Y){const Z=[];Z.startIndex=Q.lastIndex-Y[0].length;const W=Y.length;for(let J=0;J<W;J++)Z.push(Y[J]);G.push(Z),Y=Q.exec($)}return G},$7=function($){const Q=uQ.exec($);return!(Q===null||typeof Q==="undefined")};Q7.isExist=function($){return typeof $!=="undefined"};Q7.isEmptyObject=function($){return Object.keys($).length===0};Q7.merge=function($,Q,G){if(Q){const Y=Object.keys(Q),Z=Y.length;for(let W=0;W<Z;W++)if(G==="strict")$[Y[W]]=[Q[Y[W]]];else $[Y[W]]=Q[Y[W]]}};Q7.getValue=function($){if(Q7.isExist($))return $;else return""};Q7.isName=$7;Q7.getAllMatches=tQ;Q7.nameRegexp=l1});var X8=R((R7)=>{var d1=function($){return $===" "||$==="\t"||$==="\n"||$==="\r"},s1=function($,Q){const G=Q;for(;Q<$.length;Q++)if($[Q]=="?"||$[Q]==" "){const Y=$.substr(G,Q-G);if(Q>5&&Y==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",B($,Q));else if($[Q]=="?"&&$[Q+1]==">"){Q++;break}else continue}return Q},r1=function($,Q){if($.length>Q+5&&$[Q+1]==="-"&&$[Q+2]==="-"){for(Q+=3;Q<$.length;Q++)if($[Q]==="-"&&$[Q+1]==="-"&&$[Q+2]===">"){Q+=2;break}}else if($.length>Q+8&&$[Q+1]==="D"&&$[Q+2]==="O"&&$[Q+3]==="C"&&$[Q+4]==="T"&&$[Q+5]==="Y"&&$[Q+6]==="P"&&$[Q+7]==="E"){let G=1;for(Q+=8;Q<$.length;Q++)if($[Q]==="<")G++;else if($[Q]===">"){if(G--,G===0)break}}else if($.length>Q+9&&$[Q+1]==="["&&$[Q+2]==="C"&&$[Q+3]==="D"&&$[Q+4]==="A"&&$[Q+5]==="T"&&$[Q+6]==="A"&&$[Q+7]==="["){for(Q+=8;Q<$.length;Q++)if($[Q]==="]"&&$[Q+1]==="]"&&$[Q+2]===">"){Q+=2;break}}return Q},F7=function($,Q){let G="",Y="",Z=!1;for(;Q<$.length;Q++){if($[Q]===z7||$[Q]===K7)if(Y==="")Y=$[Q];else if(Y!==$[Q]);else Y="";else if($[Q]===">"){if(Y===""){Z=!0;break}}G+=$[Q]}if(Y!=="")return!1;return{value:G,index:Q,tagClosed:Z}},i1=function($,Q){const G=J8.getAllMatches($,H7),Y={};for(let Z=0;Z<G.length;Z++){if(G[Z][1].length===0)return A("InvalidAttr","Attribute '"+G[Z][2]+"' has no space in starting.",W0(G[Z]));else if(G[Z][3]!==void 0&&G[Z][4]===void 0)return A("InvalidAttr","Attribute '"+G[Z][2]+"' is without value.",W0(G[Z]));else if(G[Z][3]===void 0&&!Q.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+G[Z][2]+"' is not allowed.",W0(G[Z]));const W=G[Z][2];if(!V7(W))return A("InvalidAttr","Attribute '"+W+"' is an invalid name.",W0(G[Z]));if(!Y.hasOwnProperty(W))Y[W]=1;else return A("InvalidAttr","Attribute '"+W+"' is repeated.",W0(G[Z]))}return!0},I7=function($,Q){let G=/\d/;if($[Q]==="x")Q++,G=/[\da-fA-F]/;for(;Q<$.length;Q++){if($[Q]===";")return Q;if(!$[Q].match(G))break}return-1},L7=function($,Q){if(Q++,$[Q]===";")return-1;if($[Q]==="#")return Q++,I7($,Q);let G=0;for(;Q<$.length;Q++,G++){if($[Q].match(/\w/)&&G<20)continue;if($[Q]===";")break;return-1}return Q},A=function($,Q,G){return{err:{code:$,msg:Q,line:G.line||G,col:G.col}}},V7=function($){return J8.isName($)},M7=function($){return J8.isName($)},B=function($,Q){const G=$.substring(0,Q).split(/\r?\n/);return{line:G.length,col:G[G.length-1].length+1}},W0=function($){return $.startIndex+$[1].length},J8=T0(),U7={allowBooleanAttributes:!1,unpairedTags:[]};R7.validate=function($,Q){Q=Object.assign({},U7,Q);const G=[];let Y=!1,Z=!1;if($[0]==="\uFEFF")$=$.substr(1);for(let W=0;W<$.length;W++)if($[W]==="<"&&$[W+1]==="?"){if(W+=2,W=s1($,W),W.err)return W}else if($[W]==="<"){let J=W;if(W++,$[W]==="!"){W=r1($,W);continue}else{let X=!1;if($[W]==="/")X=!0,W++;let z="";for(;W<$.length&&$[W]!==">"&&$[W]!==" "&&$[W]!=="\t"&&$[W]!=="\n"&&$[W]!=="\r";W++)z+=$[W];if(z=z.trim(),z[z.length-1]==="/")z=z.substring(0,z.length-1),W--;if(!M7(z)){let H;if(z.trim().length===0)H="Invalid space after '<'.";else H="Tag '"+z+"' is an invalid name.";return A("InvalidTag",H,B($,W))}const U=F7($,W);if(U===!1)return A("InvalidAttr","Attributes for '"+z+"' have open quote.",B($,W));let K=U.value;if(W=U.index,K[K.length-1]==="/"){const H=W-K.length;K=K.substring(0,K.length-1);const F=i1(K,Q);if(F===!0)Y=!0;else return A(F.err.code,F.err.msg,B($,H+F.err.line))}else if(X)if(!U.tagClosed)return A("InvalidTag","Closing tag '"+z+"' doesn't have proper closing.",B($,W));else if(K.trim().length>0)return A("InvalidTag","Closing tag '"+z+"' can't have attributes or invalid starting.",B($,J));else{const H=G.pop();if(z!==H.tagName){let F=B($,H.tagStartPos);return A("InvalidTag","Expected closing tag '"+H.tagName+"' (opened in line "+F.line+", col "+F.col+") instead of closing tag '"+z+"'.",B($,J))}if(G.length==0)Z=!0}else{const H=i1(K,Q);if(H!==!0)return A(H.err.code,H.err.msg,B($,W-K.length+H.err.line));if(Z===!0)return A("InvalidXml","Multiple possible root nodes found.",B($,W));else if(Q.unpairedTags.indexOf(z)!==-1);else G.push({tagName:z,tagStartPos:J});Y=!0}for(W++;W<$.length;W++)if($[W]==="<")if($[W+1]==="!"){W++,W=r1($,W);continue}else if($[W+1]==="?"){if(W=s1($,++W),W.err)return W}else break;else if($[W]==="&"){const H=L7($,W);if(H==-1)return A("InvalidChar","char '&' is not expected.",B($,W));W=H}else if(Z===!0&&!d1($[W]))return A("InvalidXml","Extra text at the end",B($,W));if($[W]==="<")W--}}else{if(d1($[W]))continue;return A("InvalidChar","char '"+$[W]+"' is not expected.",B($,W))}if(!Y)return A("InvalidXml","Start tag expected.",1);else if(G.length==1)return A("InvalidTag","Unclosed tag '"+G[0].tagName+"'.",B($,G[0].tagStartPos));else if(G.length>0)return A("InvalidXml","Invalid '"+JSON.stringify(G.map((W)=>W.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1});return!0};var z7='"',K7="'",H7=new RegExp('(\\s*)([^\\s=]+)(\\s*=)?(\\s*([\'"])(([\\s\\S])*?)\\5)?',"g")});var p1=R((A7)=>{var a1={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function($,Q){return Q},attributeValueProcessor:function($,Q){return Q},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function($,Q,G){return $}},T7=function($){return Object.assign({},a1,$)};A7.buildOptions=T7;A7.defaultOptions=a1});var o1=R((HX,e1)=>{class n1{constructor($){this.tagname=$,this.child=[],this[":@"]={}}add($,Q){if($==="__proto__")$="#__proto__";this.child.push({[$]:Q})}addChild($){if($.tagname==="__proto__")$.tagname="#__proto__";if($[":@"]&&Object.keys($[":@"]).length>0)this.child.push({[$.tagname]:$.child,[":@"]:$[":@"]});else this.child.push({[$.tagname]:$.child})}}e1.exports=n1});var t1=R((IX,u1)=>{var _7=function($,Q){const G={};if($[Q+3]==="O"&&$[Q+4]==="C"&&$[Q+5]==="T"&&$[Q+6]==="Y"&&$[Q+7]==="P"&&$[Q+8]==="E"){Q=Q+9;let Y=1,Z=!1,W=!1,J="";for(;Q<$.length;Q++)if($[Q]==="<"&&!W){if(Z&&f7($,Q)){if(Q+=7,[entityName,val,Q]=C7($,Q+1),val.indexOf("&")===-1)G[k7(entityName)]={regx:RegExp(`&${entityName};`,"g"),val}}else if(Z&&O7($,Q))Q+=8;else if(Z&&D7($,Q))Q+=8;else if(Z&&j7($,Q))Q+=9;else if(S7)W=!0;else throw new Error("Invalid DOCTYPE");Y++,J=""}else if($[Q]===">"){if(W){if($[Q-1]==="-"&&$[Q-2]==="-")W=!1,Y--}else Y--;if(Y===0)break}else if($[Q]==="[")Z=!0;else J+=$[Q];if(Y!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:G,i:Q}},C7=function($,Q){let G="";for(;Q<$.length&&($[Q]!=="'"&&$[Q]!=='"');Q++)G+=$[Q];if(G=G.trim(),G.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Y=$[Q++];let Z="";for(;Q<$.length&&$[Q]!==Y;Q++)Z+=$[Q];return[G,Z,Q]},S7=function($,Q){if($[Q+1]==="!"&&$[Q+2]==="-"&&$[Q+3]==="-")return!0;return!1},f7=function($,Q){if($[Q+1]==="!"&&$[Q+2]==="E"&&$[Q+3]==="N"&&$[Q+4]==="T"&&$[Q+5]==="I"&&$[Q+6]==="T"&&$[Q+7]==="Y")return!0;return!1},O7=function($,Q){if($[Q+1]==="!"&&$[Q+2]==="E"&&$[Q+3]==="L"&&$[Q+4]==="E"&&$[Q+5]==="M"&&$[Q+6]==="E"&&$[Q+7]==="N"&&$[Q+8]==="T")return!0;return!1},D7=function($,Q){if($[Q+1]==="!"&&$[Q+2]==="A"&&$[Q+3]==="T"&&$[Q+4]==="T"&&$[Q+5]==="L"&&$[Q+6]==="I"&&$[Q+7]==="S"&&$[Q+8]==="T")return!0;return!1},j7=function($,Q){if($[Q+1]==="!"&&$[Q+2]==="N"&&$[Q+3]==="O"&&$[Q+4]==="T"&&$[Q+5]==="A"&&$[Q+6]==="T"&&$[Q+7]==="I"&&$[Q+8]==="O"&&$[Q+9]==="N")return!0;return!1},k7=function($){if(B7.isName($))return $;else throw new Error(`Invalid entity name ${$}`)},B7=T0();u1.exports=_7});var Q6=R((LX,$6)=>{var v7=function($,Q={}){if(Q=Object.assign({},g7,Q),!$||typeof $!=="string")return $;let G=$.trim();if(Q.skipLike!==void 0&&Q.skipLike.test(G))return $;else if(Q.hex&&N7.test(G))return Number.parseInt(G,16);else{const Y=P7.exec(G);if(Y){const Z=Y[1],W=Y[2];let J=h7(Y[3]);const X=Y[4]||Y[6];if(!Q.leadingZeros&&W.length>0&&Z&&G[2]!==".")return $;else if(!Q.leadingZeros&&W.length>0&&!Z&&G[1]!==".")return $;else{const z=Number(G),U=""+z;if(U.search(/[eE]/)!==-1)if(Q.eNotation)return z;else return $;else if(X)if(Q.eNotation)return z;else return $;else if(G.indexOf(".")!==-1)if(U==="0"&&J==="")return z;else if(U===J)return z;else if(Z&&U==="-"+J)return z;else return $;if(W)if(J===U)return z;else if(Z+J===U)return z;else return $;if(G===U)return z;else if(G===Z+U)return z;return $}}else return $}},h7=function($){if($&&$.indexOf(".")!==-1){if($=$.replace(/0+$/,""),$===".")$="0";else if($[0]===".")$="0"+$;else if($[$.length-1]===".")$=$.substr(0,$.length-1);return $}return $},N7=/^[-+]?0x[a-fA-F0-9]+$/,P7=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;if(!Number.parseInt&&window.parseInt)Number.parseInt=window.parseInt;if(!Number.parseFloat&&window.parseFloat)Number.parseFloat=window.parseFloat;var g7={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};$6.exports=v7});var Z6=R((MX,Y6)=>{var m7=function($){const Q=Object.keys($);for(let G=0;G<Q.length;G++){const Y=Q[G];this.lastEntities[Y]={regex:new RegExp("&"+Y+";","g"),val:$[Y]}}},x7=function($,Q,G,Y,Z,W,J){if($!==void 0){if(this.options.trimValues&&!Y)$=$.trim();if($.length>0){if(!J)$=this.replaceEntitiesValue($);const X=this.options.tagValueProcessor(Q,$,G,Z,W);if(X===null||X===void 0)return $;else if(typeof X!==typeof $||X!==$)return X;else if(this.options.trimValues)return z8($,this.options.parseTagValue,this.options.numberParseOptions);else if($.trim()===$)return z8($,this.options.parseTagValue,this.options.numberParseOptions);else return $}}},l7=function($){if(this.options.removeNSPrefix){const Q=$.split(":"),G=$.charAt(0)==="/"?"/":"";if(Q[0]==="xmlns")return"";if(Q.length===2)$=G+Q[1]}return $},d7=function($,Q,G){if(!this.options.ignoreAttributes&&typeof $==="string"){const Y=K8.getAllMatches($,c7),Z=Y.length,W={};for(let J=0;J<Z;J++){const X=this.resolveNameSpace(Y[J][1]);let z=Y[J][4],U=this.options.attributeNamePrefix+X;if(X.length){if(this.options.transformAttributeName)U=this.options.transformAttributeName(U);if(U==="__proto__")U="#__proto__";if(z!==void 0){if(this.options.trimValues)z=z.trim();z=this.replaceEntitiesValue(z);const K=this.options.attributeValueProcessor(X,z,Q);if(K===null||K===void 0)W[U]=z;else if(typeof K!==typeof z||K!==z)W[U]=K;else W[U]=z8(z,this.options.parseAttributeValue,this.options.numberParseOptions)}else if(this.options.allowBooleanAttributes)W[U]=!0}}if(!Object.keys(W).length)return;if(this.options.attributesGroupName){const J={};return J[this.options.attributesGroupName]=W,J}return W}},r7=function($,Q,G){const Y=this.options.updateTag(Q.tagname,G,Q[":@"]);if(Y===!1);else if(typeof Y==="string")Q.tagname=Y,$.addChild(Q);else $.addChild(Q)},a7=function($,Q,G,Y){if($){if(Y===void 0)Y=Object.keys(Q.child).length===0;if($=this.parseTextData($,Q.tagname,G,!1,Q[":@"]?Object.keys(Q[":@"]).length!==0:!1,Y),$!==void 0&&$!=="")Q.add(this.options.textNodeName,$);$=""}return $},p7=function($,Q,G){const Y="*."+G;for(let Z in $){const W=$[Z];if(Y===W||Q===W)return!0}return!1},n7=function($,Q,G=">"){let Y,Z="";for(let W=Q;W<$.length;W++){let J=$[W];if(Y){if(J===Y)Y=""}else if(J==='"'||J==="'")Y=J;else if(J===G[0])if(G[1]){if($[W+1]===G[1])return{data:Z,index:W}}else return{data:Z,index:W};else if(J==="\t")J=" ";Z+=J}},r=function($,Q,G,Y){const Z=$.indexOf(Q,G);if(Z===-1)throw new Error(Y);else return Z+Q.length-1},U8=function($,Q,G,Y=">"){const Z=n7($,Q+1,Y);if(!Z)return;let W=Z.data;const J=Z.index,X=W.search(/\s/);let z=W,U=!0;if(X!==-1)z=W.substr(0,X).replace(/\s\s*$/,""),W=W.substr(X+1);if(G){const K=z.indexOf(":");if(K!==-1)z=z.substr(K+1),U=z!==Z.data.substr(K+1)}return{tagName:z,tagExp:W,closeIndex:J,attrExpPresent:U}},e7=function($,Q,G){const Y=G;let Z=1;for(;G<$.length;G++)if($[G]==="<")if($[G+1]==="/"){const W=r($,">",G,`${Q} is not closed`);if($.substring(G+2,W).trim()===Q){if(Z--,Z===0)return{tagContent:$.substring(Y,G),i:W}}G=W}else if($[G+1]==="?")G=r($,"?>",G+1,"StopNode is not closed.");else if($.substr(G+1,3)==="!--")G=r($,"-->",G+3,"StopNode is not closed.");else if($.substr(G+1,2)==="![")G=r($,"]]>",G,"StopNode is not closed.")-2;else{const W=U8($,G,">");if(W){if((W&&W.tagName)===Q&&W.tagExp[W.tagExp.length-1]!=="/")Z++;G=W.closeIndex}}},z8=function($,Q,G){if(Q&&typeof $==="string"){const Y=$.trim();if(Y==="true")return!0;else if(Y==="false")return!1;else return b7($,G)}else if(K8.isExist($))return $;else return""},K8=T0(),J0=o1(),y7=t1(),b7=Q6(),VX="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,K8.nameRegexp);class G6{constructor($){this.options=$,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:"\""}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=m7,this.parseXml=s7,this.parseTextData=x7,this.resolveNameSpace=l7,this.buildAttributesMap=d7,this.isItStopNode=p7,this.replaceEntitiesValue=i7,this.readStopNodeData=e7,this.saveTextToParentTag=a7,this.addChild=r7}}var c7=new RegExp('([^\\s=]+)\\s*(=\\s*([\'"])([\\s\\S]*?)\\3)?',"gm"),s7=function($){$=$.replace(/\r\n?/g,"\n");const Q=new J0("!xml");let G=Q,Y="",Z="";for(let W=0;W<$.length;W++)if($[W]==="<")if($[W+1]==="/"){const X=r($,">",W,"Closing Tag is not closed.");let z=$.substring(W+2,X).trim();if(this.options.removeNSPrefix){const H=z.indexOf(":");if(H!==-1)z=z.substr(H+1)}if(this.options.transformTagName)z=this.options.transformTagName(z);if(G)Y=this.saveTextToParentTag(Y,G,Z);const U=Z.substring(Z.lastIndexOf(".")+1);if(z&&this.options.unpairedTags.indexOf(z)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${z}>`);let K=0;if(U&&this.options.unpairedTags.indexOf(U)!==-1)K=Z.lastIndexOf(".",Z.lastIndexOf(".")-1),this.tagsNodeStack.pop();else K=Z.lastIndexOf(".");Z=Z.substring(0,K),G=this.tagsNodeStack.pop(),Y="",W=X}else if($[W+1]==="?"){let X=U8($,W,!1,"?>");if(!X)throw new Error("Pi Tag is not closed.");if(Y=this.saveTextToParentTag(Y,G,Z),this.options.ignoreDeclaration&&X.tagName==="?xml"||this.options.ignorePiTags);else{const z=new J0(X.tagName);if(z.add(this.options.textNodeName,""),X.tagName!==X.tagExp&&X.attrExpPresent)z[":@"]=this.buildAttributesMap(X.tagExp,Z,X.tagName);this.addChild(G,z,Z)}W=X.closeIndex+1}else if($.substr(W+1,3)==="!--"){const X=r($,"-->",W+4,"Comment is not closed.");if(this.options.commentPropName){const z=$.substring(W+4,X-2);Y=this.saveTextToParentTag(Y,G,Z),G.add(this.options.commentPropName,[{[this.options.textNodeName]:z}])}W=X}else if($.substr(W+1,2)==="!D"){const X=y7($,W);this.docTypeEntities=X.entities,W=X.i}else if($.substr(W+1,2)==="!["){const X=r($,"]]>",W,"CDATA is not closed.")-2,z=$.substring(W+9,X);if(Y=this.saveTextToParentTag(Y,G,Z),this.options.cdataPropName)G.add(this.options.cdataPropName,[{[this.options.textNodeName]:z}]);else{let U=this.parseTextData(z,G.tagname,Z,!0,!1,!0);if(U==void 0)U="";G.add(this.options.textNodeName,U)}W=X+2}else{let X=U8($,W,this.options.removeNSPrefix),z=X.tagName,U=X.tagExp,K=X.attrExpPresent,H=X.closeIndex;if(this.options.transformTagName)z=this.options.transformTagName(z);if(G&&Y){if(G.tagname!=="!xml")Y=this.saveTextToParentTag(Y,G,Z,!1)}const F=G;if(F&&this.options.unpairedTags.indexOf(F.tagname)!==-1)G=this.tagsNodeStack.pop(),Z=Z.substring(0,Z.lastIndexOf("."));if(z!==Q.tagname)Z+=Z?"."+z:z;if(this.isItStopNode(this.options.stopNodes,Z,z)){let I="";if(U.length>0&&U.lastIndexOf("/")===U.length-1)W=X.closeIndex;else if(this.options.unpairedTags.indexOf(z)!==-1)W=X.closeIndex;else{const V=this.readStopNodeData($,z,H+1);if(!V)throw new Error(`Unexpected end of ${z}`);W=V.i,I=V.tagContent}const L=new J0(z);if(z!==U&&K)L[":@"]=this.buildAttributesMap(U,Z,z);if(I)I=this.parseTextData(I,z,Z,!0,K,!0,!0);Z=Z.substr(0,Z.lastIndexOf(".")),L.add(this.options.textNodeName,I),this.addChild(G,L,Z)}else{if(U.length>0&&U.lastIndexOf("/")===U.length-1){if(z[z.length-1]==="/")z=z.substr(0,z.length-1),U=z;else U=U.substr(0,U.length-1);if(this.options.transformTagName)z=this.options.transformTagName(z);const I=new J0(z);if(z!==U&&K)I[":@"]=this.buildAttributesMap(U,Z,z);this.addChild(G,I,Z),Z=Z.substr(0,Z.lastIndexOf("."))}else{const I=new J0(z);if(this.tagsNodeStack.push(G),z!==U&&K)I[":@"]=this.buildAttributesMap(U,Z,z);this.addChild(G,I,Z),G=I}Y="",W=H}}else Y+=$[W];return Q.child},i7=function($){if(this.options.processEntities){for(let Q in this.docTypeEntities){const G=this.docTypeEntities[Q];$=$.replace(G.regx,G.val)}for(let Q in this.lastEntities){const G=this.lastEntities[Q];$=$.replace(G.regex,G.val)}if(this.options.htmlEntities)for(let Q in this.htmlEntities){const G=this.htmlEntities[Q];$=$.replace(G.regex,G.val)}$=$.replace(this.ampEntity.regex,this.ampEntity.val)}return $};Y6.exports=G6});var J6=R((QG)=>{var o7=function($,Q){return W6($,Q)},W6=function($,Q,G){let Y;const Z={};for(let W=0;W<$.length;W++){const J=$[W],X=u7(J);let z="";if(G===void 0)z=X;else z=G+"."+X;if(X===Q.textNodeName)if(Y===void 0)Y=J[X];else Y+=""+J[X];else if(X===void 0)continue;else if(J[X]){let U=W6(J[X],Q,z);const K=$G(U,Q);if(J[":@"])t7(U,J[":@"],z,Q);else if(Object.keys(U).length===1&&U[Q.textNodeName]!==void 0&&!Q.alwaysCreateTextNode)U=U[Q.textNodeName];else if(Object.keys(U).length===0)if(Q.alwaysCreateTextNode)U[Q.textNodeName]="";else U="";if(Z[X]!==void 0&&Z.hasOwnProperty(X)){if(!Array.isArray(Z[X]))Z[X]=[Z[X]];Z[X].push(U)}else if(Q.isArray(X,z,K))Z[X]=[U];else Z[X]=U}}if(typeof Y==="string"){if(Y.length>0)Z[Q.textNodeName]=Y}else if(Y!==void 0)Z[Q.textNodeName]=Y;return Z},u7=function($){const Q=Object.keys($);for(let G=0;G<Q.length;G++){const Y=Q[G];if(Y!==":@")return Y}},t7=function($,Q,G,Y){if(Q){const Z=Object.keys(Q),W=Z.length;for(let J=0;J<W;J++){const X=Z[J];if(Y.isArray(X,G+"."+X,!0,!0))$[X]=[Q[X]];else $[X]=Q[X]}}},$G=function($,Q){const{textNodeName:G}=Q,Y=Object.keys($).length;if(Y===0)return!0;if(Y===1&&($[G]||typeof $[G]==="boolean"||$[G]===0))return!0;return!1};QG.prettify=o7});var z6=R((wX,U6)=>{var{buildOptions:YG}=p1(),ZG=Z6(),{prettify:WG}=J6(),JG=X8();class X6{constructor($){this.externalEntities={},this.options=YG($)}parse($,Q){if(typeof $==="string");else if($.toString)$=$.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(Q){if(Q===!0)Q={};const Z=JG.validate($,Q);if(Z!==!0)throw Error(`${Z.err.msg}:${Z.err.line}:${Z.err.col}`)}const G=new ZG(this.options);G.addExternalEntities(this.externalEntities);const Y=G.parseXml($);if(this.options.preserveOrder||Y===void 0)return Y;else return WG(Y,this.options)}addEntity($,Q){if(Q.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");else if($.indexOf("&")!==-1||$.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");else if(Q==="&")throw new Error("An entity with value '&' is not permitted");else this.externalEntities[$]=Q}}U6.exports=X6});var L6=R((TX,I6)=>{var XG=function($,Q){let G="";if(Q.format&&Q.indentBy.length>0)G="\n";return F6($,Q,"",G)},F6=function($,Q,G,Y){let Z="",W=!1;for(let J=0;J<$.length;J++){const X=$[J],z=UG(X);let U="";if(G.length===0)U=z;else U=`${G}.${z}`;if(z===Q.textNodeName){let L=X[z];if(!zG(U,Q))L=Q.tagValueProcessor(z,L),L=H6(L,Q);if(W)Z+=Y;Z+=L,W=!1;continue}else if(z===Q.cdataPropName){if(W)Z+=Y;Z+=`<![CDATA[${X[z][0][Q.textNodeName]}]]>`,W=!1;continue}else if(z===Q.commentPropName){Z+=Y+`<!--${X[z][0][Q.textNodeName]}-->`,W=!0;continue}else if(z[0]==="?"){const L=K6(X[":@"],Q),V=z==="?xml"?"":Y;let M=X[z][0][Q.textNodeName];M=M.length!==0?" "+M:"",Z+=V+`<${z}${M}${L}?>`,W=!0;continue}let K=Y;if(K!=="")K+=Q.indentBy;const H=K6(X[":@"],Q),F=Y+`<${z}${H}`,I=F6(X[z],Q,U,K);if(Q.unpairedTags.indexOf(z)!==-1)if(Q.suppressUnpairedNode)Z+=F+">";else Z+=F+"/>";else if((!I||I.length===0)&&Q.suppressEmptyNode)Z+=F+"/>";else if(I&&I.endsWith(">"))Z+=F+`>${I}${Y}</${z}>`;else{if(Z+=F+">",I&&Y!==""&&(I.includes("/>")||I.includes("</")))Z+=Y+Q.indentBy+I+Y;else Z+=I;Z+=`</${z}>`}W=!0}return Z},UG=function($){const Q=Object.keys($);for(let G=0;G<Q.length;G++){const Y=Q[G];if(Y!==":@")return Y}},K6=function($,Q){let G="";if($&&!Q.ignoreAttributes)for(let Y in $){let Z=Q.attributeValueProcessor(Y,$[Y]);if(Z=H6(Z,Q),Z===!0&&Q.suppressBooleanAttributes)G+=` ${Y.substr(Q.attributeNamePrefix.length)}`;else G+=` ${Y.substr(Q.attributeNamePrefix.length)}="${Z}"`}return G},zG=function($,Q){$=$.substr(0,$.length-Q.textNodeName.length-1);let G=$.substr($.lastIndexOf(".")+1);for(let Y in Q.stopNodes)if(Q.stopNodes[Y]===$||Q.stopNodes[Y]==="*."+G)return!0;return!1},H6=function($,Q){if($&&$.length>0&&Q.processEntities)for(let G=0;G<Q.entities.length;G++){const Y=Q.entities[G];$=$.replace(Y.regex,Y.val)}return $};I6.exports=XG});var M6=R((AX,V6)=>{var b=function($){if(this.options=Object.assign({},FG,$),this.options.ignoreAttributes||this.options.attributesGroupName)this.isAttribute=function(){return!1};else this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=LG;if(this.processTextOrObjNode=HG,this.options.format)this.indentate=IG,this.tagEndChar=">\n",this.newLine="\n";else this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""},HG=function($,Q,G){const Y=this.j2x($,G+1);if($[this.options.textNodeName]!==void 0&&Object.keys($).length===1)return this.buildTextValNode($[this.options.textNodeName],Q,Y.attrStr,G);else return this.buildObjectNode(Y.val,Q,Y.attrStr,G)},IG=function($){return this.options.indentBy.repeat($)},LG=function($){if($.startsWith(this.options.attributeNamePrefix))return $.substr(this.attrPrefixLen);else return!1},KG=L6(),FG={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function($,Q){return Q},attributeValueProcessor:function($,Q){return Q},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("\'","g"),val:"&apos;"},{regex:new RegExp("\"","g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};b.prototype.build=function($){if(this.options.preserveOrder)return KG($,this.options);else{if(Array.isArray($)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1)$={[this.options.arrayNodeName]:$};return this.j2x($,0).val}};b.prototype.j2x=function($,Q){let G="",Y="";for(let Z in $)if(typeof $[Z]==="undefined");else if($[Z]===null)if(Z[0]==="?")Y+=this.indentate(Q)+"<"+Z+"?"+this.tagEndChar;else Y+=this.indentate(Q)+"<"+Z+"/"+this.tagEndChar;else if($[Z]instanceof Date)Y+=this.buildTextValNode($[Z],Z,"",Q);else if(typeof $[Z]!=="object"){const W=this.isAttribute(Z);if(W)G+=this.buildAttrPairStr(W,""+$[Z]);else if(Z===this.options.textNodeName){let J=this.options.tagValueProcessor(Z,""+$[Z]);Y+=this.replaceEntitiesValue(J)}else Y+=this.buildTextValNode($[Z],Z,"",Q)}else if(Array.isArray($[Z])){const W=$[Z].length;let J="";for(let X=0;X<W;X++){const z=$[Z][X];if(typeof z==="undefined");else if(z===null)if(Z[0]==="?")Y+=this.indentate(Q)+"<"+Z+"?"+this.tagEndChar;else Y+=this.indentate(Q)+"<"+Z+"/"+this.tagEndChar;else if(typeof z==="object")if(this.options.oneListGroup)J+=this.j2x(z,Q+1).val;else J+=this.processTextOrObjNode(z,Z,Q);else J+=this.buildTextValNode(z,Z,"",Q)}if(this.options.oneListGroup)J=this.buildObjectNode(J,Z,"",Q);Y+=J}else if(this.options.attributesGroupName&&Z===this.options.attributesGroupName){const W=Object.keys($[Z]),J=W.length;for(let X=0;X<J;X++)G+=this.buildAttrPairStr(W[X],""+$[Z][W[X]])}else Y+=this.processTextOrObjNode($[Z],Z,Q);return{attrStr:G,val:Y}};b.prototype.buildAttrPairStr=function($,Q){if(Q=this.options.attributeValueProcessor($,""+Q),Q=this.replaceEntitiesValue(Q),this.options.suppressBooleanAttributes&&Q==="true")return" "+$;else return" "+$+'="'+Q+'"'};b.prototype.buildObjectNode=function($,Q,G,Y){if($==="")if(Q[0]==="?")return this.indentate(Y)+"<"+Q+G+"?"+this.tagEndChar;else return this.indentate(Y)+"<"+Q+G+this.closeTag(Q)+this.tagEndChar;else{let Z="</"+Q+this.tagEndChar,W="";if(Q[0]==="?")W="?",Z="";if(G&&$.indexOf("<")===-1)return this.indentate(Y)+"<"+Q+G+W+">"+$+Z;else if(this.options.commentPropName!==!1&&Q===this.options.commentPropName&&W.length===0)return this.indentate(Y)+`<!--${$}-->`+this.newLine;else return this.indentate(Y)+"<"+Q+G+W+this.tagEndChar+$+this.indentate(Y)+Z}};b.prototype.closeTag=function($){let Q="";if(this.options.unpairedTags.indexOf($)!==-1){if(!this.options.suppressUnpairedNode)Q="/"}else if(this.options.suppressEmptyNode)Q="/";else Q=`></${$}`;return Q};b.prototype.buildTextValNode=function($,Q,G,Y){if(this.options.cdataPropName!==!1&&Q===this.options.cdataPropName)return this.indentate(Y)+`<![CDATA[${$}]]>`+this.newLine;else if(this.options.commentPropName!==!1&&Q===this.options.commentPropName)return this.indentate(Y)+`<!--${$}-->`+this.newLine;else if(Q[0]==="?")return this.indentate(Y)+"<"+Q+G+"?"+this.tagEndChar;else{let Z=this.options.tagValueProcessor(Q,$);if(Z=this.replaceEntitiesValue(Z),Z==="")return this.indentate(Y)+"<"+Q+G+this.closeTag(Q)+this.tagEndChar;else return this.indentate(Y)+"<"+Q+G+">"+Z+"</"+Q+this.tagEndChar}};b.prototype.replaceEntitiesValue=function($){if($&&$.length>0&&this.options.processEntities)for(let Q=0;Q<this.options.entities.length;Q++){const G=this.options.entities[Q];$=$.replace(G.regex,G.val)}return $};V6.exports=b});var w6=R((EX,R6)=>{var VG=X8(),MG=z6(),RG=M6();R6.exports={XMLParser:MG,XMLValidator:VG,XMLBuilder:RG}});var w8={};h8(w8,{__values:()=>{{return R8}},__spreadArrays:()=>{{return rG}},__spread:()=>{{return sG}},__rest:()=>{{return hG}},__read:()=>{{return y6}},__param:()=>{{return bG}},__metadata:()=>{{return mG}},__makeTemplateObject:()=>{{return nG}},__importStar:()=>{{return eG}},__importDefault:()=>{{return oG}},__generator:()=>{{return lG}},__extends:()=>{{return vG}},__exportStar:()=>{{return dG}},__decorate:()=>{{return yG}},__createBinding:()=>{{return cG}},__classPrivateFieldSet:()=>{{return tG}},__classPrivateFieldGet:()=>{{return uG}},__awaiter:()=>{{return xG}},__await:()=>{{return U0}},__asyncValues:()=>{{return pG}},__asyncGenerator:()=>{{return iG}},__asyncDelegator:()=>{{return aG}},__assign:()=>{{return M8}}});function vG($,Q){V8($,Q);function G(){this.constructor=$}$.prototype=Q===null?Object.create(Q):(G.prototype=Q.prototype,new G)}function hG($,Q){var G={};for(var Y in $)if(Object.prototype.hasOwnProperty.call($,Y)&&Q.indexOf(Y)<0)G[Y]=$[Y];if($!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var Z=0,Y=Object.getOwnPropertySymbols($);Z<Y.length;Z++)if(Q.indexOf(Y[Z])<0&&Object.prototype.propertyIsEnumerable.call($,Y[Z]))G[Y[Z]]=$[Y[Z]]}return G}function yG($,Q,G,Y){var Z=arguments.length,W=Z<3?Q:Y===null?Y=Object.getOwnPropertyDescriptor(Q,G):Y,J;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")W=Reflect.decorate($,Q,G,Y);else for(var X=$.length-1;X>=0;X--)if(J=$[X])W=(Z<3?J(W):Z>3?J(Q,G,W):J(Q,G))||W;return Z>3&&W&&Object.defineProperty(Q,G,W),W}function bG($,Q){return function(G,Y){Q(G,Y,$)}}function mG($,Q){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata($,Q)}function xG($,Q,G,Y){function Z(W){return W instanceof G?W:new G(function(J){J(W)})}return new(G||(G=Promise))(function(W,J){function X(K){try{U(Y.next(K))}catch(H){J(H)}}function z(K){try{U(Y.throw(K))}catch(H){J(H)}}function U(K){K.done?W(K.value):Z(K.value).then(X,z)}U((Y=Y.apply($,Q||[])).next())})}function lG($,Q){var G={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,Z,W,J;return J={next:X(0),throw:X(1),return:X(2)},typeof Symbol==="function"&&(J[Symbol.iterator]=function(){return this}),J;function X(U){return function(K){return z([U,K])}}function z(U){if(Y)throw new TypeError("Generator is already executing.");while(G)try{if(Y=1,Z&&(W=U[0]&2?Z.return:U[0]?Z.throw||((W=Z.return)&&W.call(Z),0):Z.next)&&!(W=W.call(Z,U[1])).done)return W;if(Z=0,W)U=[U[0]&2,W.value];switch(U[0]){case 0:case 1:W=U;break;case 4:return G.label++,{value:U[1],done:!1};case 5:G.label++,Z=U[1],U=[0];continue;case 7:U=G.ops.pop(),G.trys.pop();continue;default:if((W=G.trys,!(W=W.length>0&&W[W.length-1]))&&(U[0]===6||U[0]===2)){G=0;continue}if(U[0]===3&&(!W||U[1]>W[0]&&U[1]<W[3])){G.label=U[1];break}if(U[0]===6&&G.label<W[1]){G.label=W[1],W=U;break}if(W&&G.label<W[2]){G.label=W[2],G.ops.push(U);break}if(W[2])G.ops.pop();G.trys.pop();continue}U=Q.call($,G)}catch(K){U=[6,K],Z=0}finally{Y=W=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}}function cG($,Q,G,Y){if(Y===void 0)Y=G;$[Y]=Q[G]}function dG($,Q){for(var G in $)if(G!=="default"&&!Q.hasOwnProperty(G))Q[G]=$[G]}function R8($){var Q=typeof Symbol==="function"&&Symbol.iterator,G=Q&&$[Q],Y=0;if(G)return G.call($);if($&&typeof $.length==="number")return{next:function(){if($&&Y>=$.length)$=void 0;return{value:$&&$[Y++],done:!$}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}function y6($,Q){var G=typeof Symbol==="function"&&$[Symbol.iterator];if(!G)return $;var Y=G.call($),Z,W=[],J;try{while((Q===void 0||Q-- >0)&&!(Z=Y.next()).done)W.push(Z.value)}catch(X){J={error:X}}finally{try{if(Z&&!Z.done&&(G=Y.return))G.call(Y)}finally{if(J)throw J.error}}return W}function sG(){for(var $=[],Q=0;Q<arguments.length;Q++)$=$.concat(y6(arguments[Q]));return $}function rG(){for(var $=0,Q=0,G=arguments.length;Q<G;Q++)$+=arguments[Q].length;for(var Y=Array($),Z=0,Q=0;Q<G;Q++)for(var W=arguments[Q],J=0,X=W.length;J<X;J++,Z++)Y[Z]=W[J];return Y}function U0($){return this instanceof U0?(this.v=$,this):new U0($)}function iG($,Q,G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y=G.apply($,Q||[]),Z,W=[];return Z={},J("next"),J("throw"),J("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function J(F){if(Y[F])Z[F]=function(I){return new Promise(function(L,V){W.push([F,I,L,V])>1||X(F,I)})}}function X(F,I){try{z(Y[F](I))}catch(L){H(W[0][3],L)}}function z(F){F.value instanceof U0?Promise.resolve(F.value.v).then(U,K):H(W[0][2],F)}function U(F){X("next",F)}function K(F){X("throw",F)}function H(F,I){if(F(I),W.shift(),W.length)X(W[0][0],W[0][1])}}function aG($){var Q,G;return Q={},Y("next"),Y("throw",function(Z){throw Z}),Y("return"),Q[Symbol.iterator]=function(){return this},Q;function Y(Z,W){Q[Z]=$[Z]?function(J){return(G=!G)?{value:U0($[Z](J)),done:Z==="return"}:W?W(J):J}:W}}function pG($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=$[Symbol.asyncIterator],G;return Q?Q.call($):($=typeof R8==="function"?R8($):$[Symbol.iterator](),G={},Y("next"),Y("throw"),Y("return"),G[Symbol.asyncIterator]=function(){return this},G);function Y(W){G[W]=$[W]&&function(J){return new Promise(function(X,z){J=$[W](J),Z(X,z,J.done,J.value)})}}function Z(W,J,X,z){Promise.resolve(z).then(function(U){W({value:U,done:X})},J)}}function nG($,Q){if(Object.defineProperty)Object.defineProperty($,"raw",{value:Q});else $.raw=Q;return $}function eG($){if($&&$.__esModule)return $;var Q={};if($!=null){for(var G in $)if(Object.hasOwnProperty.call($,G))Q[G]=$[G]}return Q.default=$,Q}function oG($){return $&&$.__esModule?$:{default:$}}function uG($,Q){if(!Q.has($))throw new TypeError("attempted to get private field on non-instance");return Q.get($)}function tG($,Q,G){if(!Q.has($))throw new TypeError("attempted to set private field on non-instance");return Q.set($,G),G}var V8,M8;var T8=y8(()=>{/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */V8=function($,Q){return V8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Y){G.__proto__=Y}||function(G,Y){for(var Z in Y)if(Y.hasOwnProperty(Z))G[Z]=Y[Z]},V8($,Q)},M8=function(){return M8=Object.assign||function $(Q){for(var G,Y=1,Z=arguments.length;Y<Z;Y++){G=arguments[Y];for(var W in G)if(Object.prototype.hasOwnProperty.call(G,W))Q[W]=G[W]}return Q},M8.apply(this,arguments)}});var c6=R((x6)=>{Object.defineProperty(x6,"__esModule",{value:!0});x6.AwsCrc32c=void 0;var b6=(T8(),o(w8)),A8=t(),m6=E8(),$Y=function(){function $(){this.crc32c=new m6.Crc32c}return $.prototype.update=function(Q){if((0,A8.isEmptyData)(Q))return;this.crc32c.update((0,A8.convertToBuffer)(Q))},$.prototype.digest=function(){return b6.__awaiter(this,void 0,void 0,function(){return b6.__generator(this,function(Q){return[2,(0,A8.numToUint8)(this.crc32c.digest())]})})},$.prototype.reset=function(){this.crc32c=new m6.Crc32c},$}();x6.AwsCrc32c=$Y});var E8=R((q8)=>{var YY=function($){return new d6().update($).digest()};Object.defineProperty(q8,"__esModule",{value:!0});q8.AwsCrc32c=q8.Crc32c=q8.crc32c=void 0;var QY=(T8(),o(w8)),GY=t();q8.crc32c=YY;var d6=function(){function $(){this.checksum=4294967295}return $.prototype.update=function(Q){var G,Y;try{for(var Z=QY.__values(Q),W=Z.next();!W.done;W=Z.next()){var J=W.value;this.checksum=this.checksum>>>8^WY[(this.checksum^J)&255]}}catch(X){G={error:X}}finally{try{if(W&&!W.done&&(Y=Z.return))Y.call(Z)}finally{if(G)throw G.error}}return this},$.prototype.digest=function(){return(this.checksum^4294967295)>>>0},$}();q8.Crc32c=d6;var ZY=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],WY=(0,GY.uint32ArrayFrom)(ZY),JY=c6();Object.defineProperty(q8,"AwsCrc32c",{enumerable:!0,get:function(){return JY.AwsCrc32c}})});var O8=R((VY,Q$)=>{VY.serialize=function($){return $&&typeof $.toJSON==="function"?$.toJSON():$}});var Z$=R((zU,Y$)=>{var G$=O8().serialize;Y$.exports=function $(Q,G){if(G=G$(G),G===null||typeof G!=="object"||Array.isArray(G))return G;if(Q=G$(Q),Q===null||typeof Q!=="object"||Array.isArray(Q))Q={};var Y=Object.keys(G);for(var Z=0;Z<Y.length;Z++){var W=Y[Z];if(W==="__proto__"||W==="constructor"||W==="prototype")return Q;if(G[W]===null){if(Q.hasOwnProperty(W))delete Q[W]}else Q[W]=$(Q[W],G[W])}return Q}});var J$=R((KU,W$)=>{W$.exports=function $(Q,G){if(Q===G)return!0;if(Q&&G&&typeof Q=="object"&&typeof G=="object"){if(Q.constructor!==G.constructor)return!1;var Y,Z,W;if(Array.isArray(Q)){if(Y=Q.length,Y!=G.length)return!1;for(Z=Y;Z--!==0;)if(!$(Q[Z],G[Z]))return!1;return!0}if(Q.constructor===RegExp)return Q.source===G.source&&Q.flags===G.flags;if(Q.valueOf!==Object.prototype.valueOf)return Q.valueOf()===G.valueOf();if(Q.toString!==Object.prototype.toString)return Q.toString()===G.toString();if(W=Object.keys(Q),Y=W.length,Y!==Object.keys(G).length)return!1;for(Z=Y;Z--!==0;)if(!Object.prototype.hasOwnProperty.call(G,W[Z]))return!1;for(Z=Y;Z--!==0;){var J=W[Z];if(!$(Q[J],G[J]))return!1}return!0}return Q!==Q&&G!==G}});var U$=R((FU,X$)=>{var wY=function($,Q){if($.length!==Q.length)return!1;for(var G=0;G<$.length;G++)if(!RY(Q[G],$[G]))return!1;return!0},RY=J$(),h0=O8().serialize;X$.exports=function $(Q,G){if(Q=h0(Q),G=h0(G),Q===null||G===null||typeof Q!=="object"||typeof G!=="object"||Array.isArray(Q)!==Array.isArray(G))return G;if(Array.isArray(Q)){if(!wY(Q,G))return G;return}var Y={},Z=Object.keys(Q),W=Object.keys(G),J,X,z={};for(X=0;X<W.length;X++)if(J=W[X],Z.indexOf(J)===-1)z[J]=!0,Y[J]=h0(G[J]);var U={};for(X=0;X<Z.length;X++)if(J=Z[X],W.indexOf(J)===-1)U[J]=!0,Y[J]=null;else if(Q[J]!==null&&typeof Q[J]==="object"){var K=$(Q[J],G[J]);if(K!==void 0)Y[J]=K}else if(Q[J]!==G[J])Y[J]=h0(G[J]);return Object.keys(Y).length>0?Y:void 0}});var K$=R((HU,z$)=>{z$.exports=function $(Q,G){if(Q===null||G===null||typeof Q!=="object"||typeof G!=="object"||Array.isArray(Q)!==Array.isArray(G))return G;var Y=JSON.parse(JSON.stringify(Q));return Object.keys(G).forEach(function(Z){if(Q[Z]!==void 0)Y[Z]=$(Q[Z],G[Z]);else Y[Z]=G[Z]}),Y}});var b8;(function($){$.HEADER="header",$.QUERY="query"})(b8||(b8={}));var m8;(function($){$.HTTP="http",$.HTTPS="https"})(m8||(m8={}));var b0;(function($){$[$.HEADER=0]="HEADER",$[$.TRAILER=1]="TRAILER"})(b0||(b0={}));var x8;(function($){$.HTTP_0_9="http/0.9",$.HTTP_1_0="http/1.0",$.TDS_8_0="tds/8.0"})(x8||(x8={}));var M$=function($){return Object.keys($).reduce((Q,G)=>{const Y=$[G];return{...Q,[G]:Array.isArray(Y)?[...Y]:Y}},{})};class S{constructor($){this.method=$.method||"GET",this.hostname=$.hostname||"localhost",this.port=$.port,this.query=$.query||{},this.headers=$.headers||{},this.body=$.body,this.protocol=$.protocol?$.protocol.slice(-1)!==":"?`${$.protocol}:`:$.protocol:"https:",this.path=$.path?$.path.charAt(0)!=="/"?`/${$.path}`:$.path:"/",this.username=$.username,this.password=$.password,this.fragment=$.fragment}static isInstance($){if(!$)return!1;const Q=$;return("method"in Q)&&("protocol"in Q)&&("hostname"in Q)&&("path"in Q)&&typeof Q.query==="object"&&typeof Q.headers==="object"}clone(){const $=new S({...this,headers:{...this.headers}});if($.query)$.query=M$($.query);return $}}function w$(){return($,Q)=>async(G)=>{const{request:Y}=G;if(S.isInstance(Y)){if(!Y.headers[R$])if(typeof Q?.logger?.warn==="function")Q.logger.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.");else console.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.")}return $({...G})}}var R$="content-length",T$={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},l8=($)=>({applyToStack:(Q)=>{Q.add(w$(),T$)}});var MQ={},RQ={};for(let $=0;$<256;$++){let Q=$.toString(16).toLowerCase();if(Q.length===1)Q=`0${Q}`;MQ[$]=Q,RQ[Q]=$}var I0=($)=>(new TextEncoder()).encode($);var w1=($)=>{if(typeof $==="string")return I0($);if(ArrayBuffer.isView($))return new Uint8Array($.buffer,$.byteOffset,$.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array($)};var a0=($)=>new TextDecoder("utf-8").decode($);var T1=($)=>typeof ArrayBuffer==="function"&&$ instanceof ArrayBuffer||Object.prototype.toString.call($)==="[object ArrayBuffer]";var A1=async($)=>{const Q=$?.Bucket||"";if(typeof $.Bucket==="string")$.Bucket=Q.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"));if(BQ(Q)){if($.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else if(!qQ(Q)||Q.indexOf(".")!==-1&&!String($.Endpoint).startsWith("http:")||Q.toLowerCase()!==Q||Q.length<3)$.ForcePathStyle=!0;if($.DisableMultiRegionAccessPoints)$.disableMultiRegionAccessPoints=!0,$.DisableMRAP=!0;return $},TQ=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,AQ=/(\d+\.){3}\d+/,EQ=/\.\./;var qQ=($)=>TQ.test($)&&!AQ.test($)&&!EQ.test($),BQ=($)=>{const[Q,G,Y,Z,W,J]=$.split(":"),X=Q==="arn"&&$.split(":").length>=6,z=[Q,G,Y,W,J].filter(Boolean).length===5;if(X&&!z)throw new Error(`Invalid ARN: ${$} was an invalid ARN.`);return Q==="arn"&&!!G&&!!Y&&!!W&&!!J};var E1=($,Q,G)=>{const Y=async()=>{const Z=G[$]??G[Q];if(typeof Z==="function")return Z();return Z};if($==="endpoint"||Q==="endpoint")return async()=>{const Z=await Y();if(Z&&typeof Z==="object"){if("url"in Z)return Z.url.href;if("hostname"in Z){const{protocol:W,hostname:J,port:X,path:z}=Z;return`${W}//${J}${X?":"+X:""}${z}`}}return Z};return Y};var q1=async($,Q,G,Y)=>{const Z=await _Q($,Q,G);if(typeof G.endpointProvider!=="function")throw new Error("config.endpointProvider is not set.");return G.endpointProvider(Z,Y)},_Q=async($,Q,G)=>{const Y={},Z=Q?.getEndpointParameterInstructions?.()||{};for(let[W,J]of Object.entries(Z))switch(J.type){case"staticContextParams":Y[W]=J.value;break;case"contextParams":Y[W]=$[J.name];break;case"clientContextParams":case"builtInParams":Y[W]=await E1(J.name,W,G)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(J))}if(Object.keys(Z).length===0)Object.assign(Y,G);if(String(G.serviceId).toLowerCase()==="s3")await A1(Y);return Y};var B1=({config:$,instructions:Q})=>{return(G,Y)=>async(Z)=>{const W=await q1(Z.input,{getEndpointParameterInstructions(){return Q}},{...$},Y);Y.endpointV2=W,Y.authSchemes=W.properties?.authSchemes;const J=Y.authSchemes?.[0];if(J)Y.signing_region=J.signingRegion,Y.signing_service=J.signingName;return G({...Z})}};var _1=($,Q)=>(G,Y)=>async(Z)=>{const{response:W}=await G(Z);try{const J=await Q(W,$);return{response:W,output:J}}catch(J){if(Object.defineProperty(J,"$response",{value:W}),!("$metadata"in J))J.message+="\n  Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";throw J}};var C1=($,Q)=>(G,Y)=>async(Z)=>{const W=Y.endpointV2?.url&&$.urlParser?async()=>$.urlParser(Y.endpointV2.url):$.endpoint;if(!W)throw new Error("No valid endpoint provider available.");const J=await Q(Z.input,{...$,endpoint:W});return G({...Z,request:J})};function N($,Q,G){return{applyToStack:(Y)=>{Y.add(_1($,G),CQ),Y.add(C1($,Q),p0)}}}var CQ={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},p0={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};var SQ={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:p0.name},P=($,Q)=>({applyToStack:(G)=>{G.addRelativeTo(B1({config:$,instructions:Q}),SQ)}});var $0=()=>{let $=[],Q=[];const G=new Set,Y=(K)=>K.sort((H,F)=>S1[F.step]-S1[H.step]||f1[F.priority||"normal"]-f1[H.priority||"normal"]),Z=(K)=>{let H=!1;const F=(I)=>{if(I.name&&I.name===K)return H=!0,G.delete(K),!1;return!0};return $=$.filter(F),Q=Q.filter(F),H},W=(K)=>{let H=!1;const F=(I)=>{if(I.middleware===K){if(H=!0,I.name)G.delete(I.name);return!1}return!0};return $=$.filter(F),Q=Q.filter(F),H},J=(K)=>{return $.forEach((H)=>{K.add(H.middleware,{...H})}),Q.forEach((H)=>{K.addRelativeTo(H.middleware,{...H})}),K},X=(K)=>{const H=[];return K.before.forEach((F)=>{if(F.before.length===0&&F.after.length===0)H.push(F);else H.push(...X(F))}),H.push(K),K.after.reverse().forEach((F)=>{if(F.before.length===0&&F.after.length===0)H.push(F);else H.push(...X(F))}),H},z=(K=!1)=>{const H=[],F=[],I={};return $.forEach((V)=>{const M={...V,before:[],after:[]};if(M.name)I[M.name]=M;H.push(M)}),Q.forEach((V)=>{const M={...V,before:[],after:[]};if(M.name)I[M.name]=M;F.push(M)}),F.forEach((V)=>{if(V.toMiddleware){const M=I[V.toMiddleware];if(M===void 0){if(K)return;throw new Error(`${V.toMiddleware} is not found when adding ${V.name||"anonymous"} middleware ${V.relation} ${V.toMiddleware}`)}if(V.relation==="after")M.after.push(V);if(V.relation==="before")M.before.push(V)}}),Y(H).map(X).reduce((V,M)=>{return V.push(...M),V},[])},U={add:(K,H={})=>{const{name:F,override:I}=H,L={step:"initialize",priority:"normal",middleware:K,...H};if(F){if(G.has(F)){if(!I)throw new Error(`Duplicate middleware name '${F}'`);const V=$.findIndex((_)=>_.name===F),M=$[V];if(M.step!==L.step||M.priority!==L.priority)throw new Error(`"${F}" middleware with ${M.priority} priority in ${M.step} step cannot be `+`overridden by same-name middleware with ${L.priority} priority in ${L.step} step.`);$.splice(V,1)}G.add(F)}$.push(L)},addRelativeTo:(K,H)=>{const{name:F,override:I}=H,L={middleware:K,...H};if(F){if(G.has(F)){if(!I)throw new Error(`Duplicate middleware name '${F}'`);const V=Q.findIndex((_)=>_.name===F),M=Q[V];if(M.toMiddleware!==L.toMiddleware||M.relation!==L.relation)throw new Error(`"${F}" middleware ${M.relation} "${M.toMiddleware}" middleware cannot be overridden `+`by same-name middleware ${L.relation} "${L.toMiddleware}" middleware.`);Q.splice(V,1)}G.add(F)}Q.push(L)},clone:()=>J($0()),use:(K)=>{K.applyToStack(U)},remove:(K)=>{if(typeof K==="string")return Z(K);else return W(K)},removeByTag:(K)=>{let H=!1;const F=(I)=>{const{tags:L,name:V}=I;if(L&&L.includes(K)){if(V)G.delete(V);return H=!0,!1}return!0};return $=$.filter(F),Q=Q.filter(F),H},concat:(K)=>{const H=J($0());return H.use(K),H},applyToStack:J,identify:()=>{return z(!0).map((K)=>{return K.name+": "+(K.tags||[]).join(",")})},resolve:(K,H)=>{for(let F of z().map((I)=>I.middleware).reverse())K=F(K,H);return K}};return U},S1={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},f1={high:3,normal:2,low:1};var O={},l=new Array(64);for(let $=0,Q="A".charCodeAt(0),G="Z".charCodeAt(0);$+Q<=G;$++){const Y=String.fromCharCode($+Q);O[Y]=$,l[$]=Y}for(let $=0,Q="a".charCodeAt(0),G="z".charCodeAt(0);$+Q<=G;$++){const Y=String.fromCharCode($+Q),Z=$+26;O[Y]=Z,l[Z]=Y}for(let $=0;$<10;$++){O[$.toString(10)]=$+52;const Q=$.toString(10),G=$+52;O[Q]=G,l[G]=Q}O["+"]=62;l[62]="+";O["/"]=63;l[63]="/";var g=6,c=8,O1=63;var n0=($)=>{let Q=$.length/4*3;if($.slice(-2)==="==")Q-=2;else if($.slice(-1)==="=")Q--;const G=new ArrayBuffer(Q),Y=new DataView(G);for(let Z=0;Z<$.length;Z+=4){let W=0,J=0;for(let U=Z,K=Z+3;U<=K;U++)if($[U]!=="="){if(!($[U]in O))throw new TypeError(`Invalid character ${$[U]} in base64 string.`);W|=O[$[U]]<<(K-U)*g,J+=g}else W>>=g;const X=Z/4*3;W>>=J%c;const z=Math.floor(J/c);for(let U=0;U<z;U++){const K=(z-U-1)*c;Y.setUint8(X+U,(W&255<<K)>>K)}}return new Uint8Array(G)};function e0($){let Q="";for(let G=0;G<$.length;G+=3){let Y=0,Z=0;for(let J=G,X=Math.min(G+3,$.length);J<X;J++)Y|=$[J]<<(X-J-1)*c,Z+=c;const W=Math.ceil(Z/g);Y<<=W*g-Z;for(let J=1;J<=W;J++){const X=(W-J)*g;Q+=l[(Y&O1<<X)>>X]}Q+="==".slice(0,4-W)}return Q}function D1($,Q="utf-8"){if(Q==="base64")return e0($);return a0($)}function j1($,Q){if(Q==="base64")return D.mutate(n0($));return D.mutate(I0($))}class D extends Uint8Array{static fromString($,Q="utf-8"){switch(typeof $){case"string":return j1($,Q);default:throw new Error(`Unsupported conversion from ${typeof $} to Uint8ArrayBlobAdapter.`)}}static mutate($){return Object.setPrototypeOf($,D.prototype),$}transformToString($="utf-8"){return D1(this,$)}}var L0=async($=new Uint8Array,Q)=>{if($ instanceof Uint8Array)return D.mutate($);if(!$)return D.mutate(new Uint8Array);const G=Q.streamCollector($);return D.mutate(await G)};class j{constructor(){this.middlewareStack=$0()}}var v="***SensitiveInformation***";var d=($)=>{switch($){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${$}"`)}};var fQ=($)=>{if($===null||$===void 0)return;if(typeof $==="string"){const Q=parseFloat($);if(!Number.isNaN(Q)){if(String(Q)!==String($))m1.warn(b1(`Expected number but observed string: ${$}`));return Q}}if(typeof $==="number")return $;throw new TypeError(`Expected number, got ${typeof $}: ${$}`)},OQ=Math.ceil(340282346638528860000000000000000000000),k1=($)=>{const Q=fQ($);if(Q!==void 0&&!Number.isNaN(Q)&&Q!==Infinity&&Q!==(-Infinity)){if(Math.abs(Q)>OQ)throw new TypeError(`Expected 32-bit float, got ${$}`)}return Q},o0=($)=>{if($===null||$===void 0)return;if(Number.isInteger($)&&!Number.isNaN($))return $;throw new TypeError(`Expected integer, got ${typeof $}: ${$}`)};var N1=($)=>u0($,32),P1=($)=>u0($,16),g1=($)=>u0($,8),u0=($,Q)=>{const G=o0($);if(G!==void 0&&DQ(G,Q)!==G)throw new TypeError(`Expected ${Q}-bit integer, got ${$}`);return G},DQ=($,Q)=>{switch(Q){case 32:return Int32Array.of($)[0];case 16:return Int16Array.of($)[0];case 8:return Int8Array.of($)[0]}},s=($,Q)=>{if($===null||$===void 0){if(Q)throw new TypeError(`Expected a non-null value for ${Q}`);throw new TypeError("Expected a non-null value")}return $},v1=($)=>{if($===null||$===void 0)return;if(typeof $==="object"&&!Array.isArray($))return $;const Q=Array.isArray($)?"array":typeof $;throw new TypeError(`Expected object, got ${Q}: ${$}`)},E=($)=>{if($===null||$===void 0)return;if(typeof $==="string")return $;if(["boolean","number","bigint"].includes(typeof $))return m1.warn(b1(`Expected string, got ${typeof $}: ${$}`)),String($);throw new TypeError(`Expected string, got ${typeof $}: ${$}`)};var h1=($)=>{if(typeof $=="string")return k1(Q0($));return k1($)},jQ=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Q0=($)=>{const Q=$.match(jQ);if(Q===null||Q[0].length!==$.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat($)};var t0=($)=>{if(typeof $==="string")return o0(Q0($));return o0($)};var p=($)=>{if(typeof $==="string")return N1(Q0($));return N1($)},G0=($)=>{if(typeof $==="string")return P1(Q0($));return P1($)},y1=($)=>{if(typeof $==="string")return g1(Q0($));return g1($)},b1=($)=>{return String(new TypeError($).stack||$).split("\n").slice(0,5).filter((Q)=>!Q.includes("stackTraceWarning")).join("\n")},m1={warn:console.warn};function Z0($){const Q=$.getUTCFullYear(),G=$.getUTCMonth(),Y=$.getUTCDay(),Z=$.getUTCDate(),W=$.getUTCHours(),J=$.getUTCMinutes(),X=$.getUTCSeconds(),z=Z<10?`0${Z}`:`${Z}`,U=W<10?`0${W}`:`${W}`,K=J<10?`0${J}`:`${J}`,H=X<10?`0${X}`:`${X}`;return`${kQ[Y]}, ${z} ${Q8[G]} ${Q} ${U}:${K}:${H} GMT`}var kQ=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Q8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],HJ=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var NQ=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),M0=($)=>{if($===null||$===void 0)return;if(typeof $!=="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const Q=NQ.exec($);if(!Q)throw new TypeError("Invalid RFC-3339 date-time value");const[G,Y,Z,W,J,X,z,U,K]=Q,H=G0(Y0(Y)),F=h(Z,"month",1,12),I=h(W,"day",1,31),L=V0(H,F,I,{hours:J,minutes:X,seconds:z,fractionalMilliseconds:U});if(K.toUpperCase()!="Z")L.setTime(L.getTime()-dQ(K));return L},PQ=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),gQ=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),vQ=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),G8=($)=>{if($===null||$===void 0)return;if(typeof $!=="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let Q=PQ.exec($);if(Q){const[G,Y,Z,W,J,X,z,U]=Q;return V0(G0(Y0(W)),$8(Z),h(Y,"day",1,31),{hours:J,minutes:X,seconds:z,fractionalMilliseconds:U})}if(Q=gQ.exec($),Q){const[G,Y,Z,W,J,X,z,U]=Q;return bQ(V0(hQ(W),$8(Z),h(Y,"day",1,31),{hours:J,minutes:X,seconds:z,fractionalMilliseconds:U}))}if(Q=vQ.exec($),Q){const[G,Y,Z,W,J,X,z,U]=Q;return V0(G0(Y0(U)),$8(Y),h(Z.trimLeft(),"day",1,31),{hours:W,minutes:J,seconds:X,fractionalMilliseconds:z})}throw new TypeError("Invalid RFC-7231 date-time value")};var V0=($,Q,G,Y)=>{const Z=Q-1;return xQ($,Z,G),new Date(Date.UTC($,Z,G,h(Y.hours,"hour",0,23),h(Y.minutes,"minute",0,59),h(Y.seconds,"seconds",0,60),cQ(Y.fractionalMilliseconds)))},hQ=($)=>{const Q=(new Date()).getUTCFullYear(),G=Math.floor(Q/100)*100+G0(Y0($));if(G<Q)return G+100;return G},yQ=1576800000000,bQ=($)=>{if($.getTime()-(new Date()).getTime()>yQ)return new Date(Date.UTC($.getUTCFullYear()-100,$.getUTCMonth(),$.getUTCDate(),$.getUTCHours(),$.getUTCMinutes(),$.getUTCSeconds(),$.getUTCMilliseconds()));return $},$8=($)=>{const Q=Q8.indexOf($);if(Q<0)throw new TypeError(`Invalid month: ${$}`);return Q+1},mQ=[31,28,31,30,31,30,31,31,30,31,30,31],xQ=($,Q,G)=>{let Y=mQ[Q];if(Q===1&&lQ($))Y=29;if(G>Y)throw new TypeError(`Invalid day for ${Q8[Q]} in ${$}: ${G}`)},lQ=($)=>{return $%4===0&&($%100!==0||$%400===0)},h=($,Q,G,Y)=>{const Z=y1(Y0($));if(Z<G||Z>Y)throw new TypeError(`${Q} must be between ${G} and ${Y}, inclusive`);return Z},cQ=($)=>{if($===null||$===void 0)return 0;return h1("0."+$)*1000},dQ=($)=>{const Q=$[0];let G=1;if(Q=="+")G=1;else if(Q=="-")G=-1;else throw new TypeError(`Offset direction, ${Q}, must be "+" or "-"`);const Y=Number($.substring(1,3)),Z=Number($.substring(4,6));return G*(Y*60+Z)*60*1000},Y0=($)=>{let Q=0;while(Q<$.length-1&&$.charAt(Q)==="0")Q++;if(Q===0)return $;return $.slice(Q)};class R0 extends Error{constructor($){super($.message);Object.setPrototypeOf(this,R0.prototype),this.name=$.name,this.$fault=$.$fault,this.$metadata=$.$metadata}}var n=($,Q={})=>{Object.entries(Q).filter(([,Y])=>Y!==void 0).forEach(([Y,Z])=>{if($[Y]==void 0||$[Y]==="")$[Y]=Z});const G=$.message||$.Message||"UnknownError";return $.message=G,delete $.Message,$};var sQ=({output:$,parsedBody:Q,exceptionCtor:G,errorCode:Y})=>{const Z=rQ($),W=Z.httpStatusCode?Z.httpStatusCode+"":void 0,J=new G({name:Q?.code||Q?.Code||Y||W||"UnknownError",$fault:"client",$metadata:Z});throw n(J,Q)},x1=($)=>{return({output:Q,parsedBody:G,errorCode:Y})=>{sQ({output:Q,parsedBody:G,exceptionCtor:$,errorCode:Y})}},rQ=($)=>({httpStatusCode:$.statusCode,requestId:$.headers["x-amzn-requestid"]??$.headers["x-amzn-request-id"]??$.headers["x-amz-request-id"],extendedRequestId:$.headers["x-amz-id-2"],cfId:$.headers["x-amz-cf-id"]});function Y8($){return encodeURIComponent($).replace(/[!'()*]/g,function(Q){return"%"+Q.charCodeAt(0).toString(16).toUpperCase()})}var w0=($)=>Array.isArray($)?$:[$];var Z8=($)=>{for(let G in $)if($.hasOwnProperty(G)&&$[G]["#text"]!==void 0)$[G]=$[G]["#text"];else if(typeof $[G]==="object"&&$[G]!==null)$[G]=Z8($[G]);return $};var W8=function(){const $=Object.getPrototypeOf(this).constructor,G=new(Function.bind.apply(String,[null,...arguments]));return Object.setPrototypeOf(G,$.prototype),G};W8.prototype=Object.create(String.prototype,{constructor:{value:W8,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(W8,String);function q($,Q,G){let Y,Z,W;if(typeof Q==="undefined"&&typeof G==="undefined")Y={},W=$;else if(Y=$,typeof Q==="function")return Z=Q,W=G,iQ(Y,Z,W);else W=Q;for(let J of Object.keys(W)){if(!Array.isArray(W[J])){Y[J]=W[J];continue}aQ(Y,null,W,J)}return Y}var iQ=($,Q,G)=>{return q($,Object.entries(G).reduce((Y,[Z,W])=>{if(Array.isArray(W))Y[Z]=W;else if(typeof W==="function")Y[Z]=[Q,W()];else Y[Z]=[Q,W];return Y},{}))},aQ=($,Q,G,Y)=>{if(Q!==null){let J=G[Y];if(typeof J==="function")J=[,J];const[X=pQ,z=nQ,U=Y]=J;if(typeof X==="function"&&X(Q[U])||typeof X!=="function"&&!!X)$[Y]=z(Q[U]);return}let[Z,W]=G[Y];if(typeof W==="function"){let J;const X=Z===void 0&&(J=W())!=null,z=typeof Z==="function"&&!!Z(void 0)||typeof Z!=="function"&&!!Z;if(X)$[Y]=J;else if(z)$[Y]=W()}else{const J=Z===void 0&&W!=null,X=typeof Z==="function"&&!!Z(W)||typeof Z!=="function"&&!!Z;if(J||X)$[Y]=W}},pQ=($)=>$!=null,nQ=($)=>$;var y=($,Q,G,Y,Z,W)=>{if(Q!=null&&Q[G]!==void 0){const J=Y();if(J.length<=0)throw new Error("Empty value provided for input HTTP label: "+G+".");$=$.replace(Z,W?J.split("/").map((X)=>Y8(X)).join("/"):Y8(J))}else throw new Error("No value provided for input HTTP label: "+G+".");return $};var B6=y0(w6(),1);class m extends R0{constructor($){super($);Object.setPrototypeOf(this,m.prototype)}}var F8;(function($){$.visit=(Q,G)=>{if(Q.Prefix!==void 0)return G.Prefix(Q.Prefix);if(Q.Tag!==void 0)return G.Tag(Q.Tag);if(Q.And!==void 0)return G.And(Q.And);return G._(Q.$unknown[0],Q.$unknown[1])}})(F8||(F8={}));var H8;(function($){$.visit=(Q,G)=>{if(Q.Prefix!==void 0)return G.Prefix(Q.Prefix);if(Q.Tag!==void 0)return G.Tag(Q.Tag);if(Q.ObjectSizeGreaterThan!==void 0)return G.ObjectSizeGreaterThan(Q.ObjectSizeGreaterThan);if(Q.ObjectSizeLessThan!==void 0)return G.ObjectSizeLessThan(Q.ObjectSizeLessThan);if(Q.And!==void 0)return G.And(Q.And);return G._(Q.$unknown[0],Q.$unknown[1])}})(H8||(H8={}));var I8;(function($){$.visit=(Q,G)=>{if(Q.Prefix!==void 0)return G.Prefix(Q.Prefix);if(Q.Tag!==void 0)return G.Tag(Q.Tag);if(Q.AccessPointArn!==void 0)return G.AccessPointArn(Q.AccessPointArn);if(Q.And!==void 0)return G.And(Q.And);return G._(Q.$unknown[0],Q.$unknown[1])}})(I8||(I8={}));var L8;(function($){$.visit=(Q,G)=>{if(Q.Prefix!==void 0)return G.Prefix(Q.Prefix);if(Q.Tag!==void 0)return G.Tag(Q.Tag);if(Q.And!==void 0)return G.And(Q.And);return G._(Q.$unknown[0],Q.$unknown[1])}})(L8||(L8={}));class A0 extends m{constructor($){super({name:"InvalidObjectState",$fault:"client",...$});this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,A0.prototype),this.StorageClass=$.StorageClass,this.AccessTier=$.AccessTier}}class E0 extends m{constructor($){super({name:"NoSuchKey",$fault:"client",...$});this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,E0.prototype)}}class q0 extends m{constructor($){super({name:"NoSuchBucket",$fault:"client",...$});this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,q0.prototype)}}var T6=($)=>({...$,...$.SSEKMSKeyId&&{SSEKMSKeyId:v}}),A6=($)=>({...$,...$.SSECustomerKey&&{SSECustomerKey:v}});var E6=($)=>({...$,...$.SSEKMSKeyId&&{SSEKMSKeyId:v},...$.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:v}}),q6=($)=>({...$,...$.SSECustomerKey&&{SSECustomerKey:v},...$.SSEKMSKeyId&&{SSEKMSKeyId:v},...$.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:v}});var _6=async($,Q)=>{const{hostname:G,protocol:Y="https",port:Z,path:W}=await Q.endpoint(),J=q({},C,{"x-amz-mfa":$.MFA,"x-amz-request-payer":$.RequestPayer,"x-amz-bypass-governance-retention":[()=>C($.BypassGovernanceRetention),()=>$.BypassGovernanceRetention.toString()],"x-amz-expected-bucket-owner":$.ExpectedBucketOwner});let X=`${W?.endsWith("/")?W.slice(0,-1):W||""}`+"/{Key+}";X=y(X,$,"Bucket",()=>$.Bucket,"{Bucket}",!1),X=y(X,$,"Key",()=>$.Key,"{Key+}",!0);const z=q({"x-id":[,"DeleteObject"],versionId:[,$.VersionId]});let U;return new S({protocol:Y,hostname:G,port:Z,method:"DELETE",headers:J,path:X,query:z,body:U})};var C6=async($,Q)=>{const{hostname:G,protocol:Y="https",port:Z,path:W}=await Q.endpoint(),J=q({},C,{"if-match":$.IfMatch,"if-modified-since":[()=>C($.IfModifiedSince),()=>Z0($.IfModifiedSince).toString()],"if-none-match":$.IfNoneMatch,"if-unmodified-since":[()=>C($.IfUnmodifiedSince),()=>Z0($.IfUnmodifiedSince).toString()],range:$.Range,"x-amz-server-side-encryption-customer-algorithm":$.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":$.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":$.SSECustomerKeyMD5,"x-amz-request-payer":$.RequestPayer,"x-amz-expected-bucket-owner":$.ExpectedBucketOwner,"x-amz-checksum-mode":$.ChecksumMode});let X=`${W?.endsWith("/")?W.slice(0,-1):W||""}`+"/{Key+}";X=y(X,$,"Bucket",()=>$.Bucket,"{Bucket}",!1),X=y(X,$,"Key",()=>$.Key,"{Key+}",!0);const z=q({"x-id":[,"GetObject"],"response-cache-control":[,$.ResponseCacheControl],"response-content-disposition":[,$.ResponseContentDisposition],"response-content-encoding":[,$.ResponseContentEncoding],"response-content-language":[,$.ResponseContentLanguage],"response-content-type":[,$.ResponseContentType],"response-expires":[()=>$.ResponseExpires!==void 0,()=>Z0($.ResponseExpires).toString()],versionId:[,$.VersionId],partNumber:[()=>$.PartNumber!==void 0,()=>$.PartNumber.toString()]});let U;return new S({protocol:Y,hostname:G,port:Z,method:"GET",headers:J,path:X,query:z,body:U})};var S6=async($,Q)=>{const{hostname:G,protocol:Y="https",port:Z,path:W}=await Q.endpoint(),J=q({},C,{"x-amz-request-payer":$.RequestPayer,"x-amz-expected-bucket-owner":$.ExpectedBucketOwner,"x-amz-optional-object-attributes":[()=>C($.OptionalObjectAttributes),()=>($.OptionalObjectAttributes||[]).map((K)=>K).join(", ")]});let X=`${W?.endsWith("/")?W.slice(0,-1):W||""}`+"/";X=y(X,$,"Bucket",()=>$.Bucket,"{Bucket}",!1);const z=q({"list-type":[,"2"],delimiter:[,$.Delimiter],"encoding-type":[,$.EncodingType],"max-keys":[()=>$.MaxKeys!==void 0,()=>$.MaxKeys.toString()],prefix:[,$.Prefix],"continuation-token":[,$.ContinuationToken],"fetch-owner":[()=>$.FetchOwner!==void 0,()=>$.FetchOwner.toString()],"start-after":[,$.StartAfter]});let U;return new S({protocol:Y,hostname:G,port:Z,method:"GET",headers:J,path:X,query:z,body:U})};var f6=async($,Q)=>{const{hostname:G,protocol:Y="https",port:Z,path:W}=await Q.endpoint(),J=q({},C,{"content-type":$.ContentType||"application/octet-stream","x-amz-acl":$.ACL,"cache-control":$.CacheControl,"content-disposition":$.ContentDisposition,"content-encoding":$.ContentEncoding,"content-language":$.ContentLanguage,"content-length":[()=>C($.ContentLength),()=>$.ContentLength.toString()],"content-md5":$.ContentMD5,"x-amz-sdk-checksum-algorithm":$.ChecksumAlgorithm,"x-amz-checksum-crc32":$.ChecksumCRC32,"x-amz-checksum-crc32c":$.ChecksumCRC32C,"x-amz-checksum-sha1":$.ChecksumSHA1,"x-amz-checksum-sha256":$.ChecksumSHA256,expires:[()=>C($.Expires),()=>Z0($.Expires).toString()],"x-amz-grant-full-control":$.GrantFullControl,"x-amz-grant-read":$.GrantRead,"x-amz-grant-read-acp":$.GrantReadACP,"x-amz-grant-write-acp":$.GrantWriteACP,"x-amz-server-side-encryption":$.ServerSideEncryption,"x-amz-storage-class":$.StorageClass,"x-amz-website-redirect-location":$.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":$.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":$.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":$.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":$.SSEKMSKeyId,"x-amz-server-side-encryption-context":$.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>C($.BucketKeyEnabled),()=>$.BucketKeyEnabled.toString()],"x-amz-request-payer":$.RequestPayer,"x-amz-tagging":$.Tagging,"x-amz-object-lock-mode":$.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>C($.ObjectLockRetainUntilDate),()=>($.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":$.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":$.ExpectedBucketOwner,...$.Metadata!==void 0&&Object.keys($.Metadata).reduce((H,F)=>{return H[`x-amz-meta-${F.toLowerCase()}`]=$.Metadata[F],H},{})});let X=`${W?.endsWith("/")?W.slice(0,-1):W||""}`+"/{Key+}";X=y(X,$,"Bucket",()=>$.Bucket,"{Bucket}",!1),X=y(X,$,"Key",()=>$.Key,"{Key+}",!0);const z=q({"x-id":[,"PutObject"]});let U;if($.Body!==void 0)U=$.Body;let K;if($.Body!==void 0)K=$.Body,U=K;return new S({protocol:Y,hostname:G,port:Z,method:"PUT",headers:J,path:X,query:z,body:U})};var O6=async($,Q)=>{if($.statusCode!==204&&$.statusCode>=300)return wG($,Q);const G=q({$metadata:i($),DeleteMarker:[()=>$.headers["x-amz-delete-marker"]!==void 0,()=>d($.headers["x-amz-delete-marker"])],VersionId:[,$.headers["x-amz-version-id"]],RequestCharged:[,$.headers["x-amz-request-charged"]]});return await L0($.body,Q),G},wG=async($,Q)=>{const G={...$,body:await _0($.body,Q)},Y=C0($,G.body),Z=G.body;return B0({output:$,parsedBody:Z,errorCode:Y})};var D6=async($,Q)=>{if($.statusCode!==200&&$.statusCode>=300)return TG($,Q);const G=q({$metadata:i($),DeleteMarker:[()=>$.headers["x-amz-delete-marker"]!==void 0,()=>d($.headers["x-amz-delete-marker"])],AcceptRanges:[,$.headers["accept-ranges"]],Expiration:[,$.headers["x-amz-expiration"]],Restore:[,$.headers["x-amz-restore"]],LastModified:[()=>$.headers["last-modified"]!==void 0,()=>s(G8($.headers["last-modified"]))],ContentLength:[()=>$.headers["content-length"]!==void 0,()=>t0($.headers["content-length"])],ETag:[,$.headers.etag],ChecksumCRC32:[,$.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,$.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,$.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,$.headers["x-amz-checksum-sha256"]],MissingMeta:[()=>$.headers["x-amz-missing-meta"]!==void 0,()=>p($.headers["x-amz-missing-meta"])],VersionId:[,$.headers["x-amz-version-id"]],CacheControl:[,$.headers["cache-control"]],ContentDisposition:[,$.headers["content-disposition"]],ContentEncoding:[,$.headers["content-encoding"]],ContentLanguage:[,$.headers["content-language"]],ContentRange:[,$.headers["content-range"]],ContentType:[,$.headers["content-type"]],Expires:[()=>$.headers.expires!==void 0,()=>s(G8($.headers.expires))],WebsiteRedirectLocation:[,$.headers["x-amz-website-redirect-location"]],ServerSideEncryption:[,$.headers["x-amz-server-side-encryption"]],SSECustomerAlgorithm:[,$.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,$.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,$.headers["x-amz-server-side-encryption-aws-kms-key-id"]],BucketKeyEnabled:[()=>$.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>d($.headers["x-amz-server-side-encryption-bucket-key-enabled"])],StorageClass:[,$.headers["x-amz-storage-class"]],RequestCharged:[,$.headers["x-amz-request-charged"]],ReplicationStatus:[,$.headers["x-amz-replication-status"]],PartsCount:[()=>$.headers["x-amz-mp-parts-count"]!==void 0,()=>p($.headers["x-amz-mp-parts-count"])],TagCount:[()=>$.headers["x-amz-tagging-count"]!==void 0,()=>p($.headers["x-amz-tagging-count"])],ObjectLockMode:[,$.headers["x-amz-object-lock-mode"]],ObjectLockRetainUntilDate:[()=>$.headers["x-amz-object-lock-retain-until-date"]!==void 0,()=>s(M0($.headers["x-amz-object-lock-retain-until-date"]))],ObjectLockLegalHoldStatus:[,$.headers["x-amz-object-lock-legal-hold"]],Metadata:[,Object.keys($.headers).filter((Z)=>Z.startsWith("x-amz-meta-")).reduce((Z,W)=>{return Z[W.substring(11)]=$.headers[W],Z},{})]}),Y=$.body;return Q.sdkStreamMixin(Y),G.Body=Y,G},TG=async($,Q)=>{const G={...$,body:await _0($.body,Q)},Y=C0($,G.body);switch(Y){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await qG(G,Q);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await _G(G,Q);default:const Z=G.body;return B0({output:$,parsedBody:Z,errorCode:Y})}};var j6=async($,Q)=>{if($.statusCode!==200&&$.statusCode>=300)return AG($,Q);const G=q({$metadata:i($),RequestCharged:[,$.headers["x-amz-request-charged"]]}),Y=s(v1(await N6($.body,Q)),"body");if(Y.CommonPrefixes==="")G.CommonPrefixes=[];else if(Y.CommonPrefixes!==void 0)G.CommonPrefixes=fG(w0(Y.CommonPrefixes),Q);if(Y.Contents==="")G.Contents=[];else if(Y.Contents!==void 0)G.Contents=DG(w0(Y.Contents),Q);if(Y.ContinuationToken!==void 0)G.ContinuationToken=E(Y.ContinuationToken);if(Y.Delimiter!==void 0)G.Delimiter=E(Y.Delimiter);if(Y.EncodingType!==void 0)G.EncodingType=E(Y.EncodingType);if(Y.IsTruncated!==void 0)G.IsTruncated=d(Y.IsTruncated);if(Y.KeyCount!==void 0)G.KeyCount=p(Y.KeyCount);if(Y.MaxKeys!==void 0)G.MaxKeys=p(Y.MaxKeys);if(Y.Name!==void 0)G.Name=E(Y.Name);if(Y.NextContinuationToken!==void 0)G.NextContinuationToken=E(Y.NextContinuationToken);if(Y.Prefix!==void 0)G.Prefix=E(Y.Prefix);if(Y.StartAfter!==void 0)G.StartAfter=E(Y.StartAfter);return G},AG=async($,Q)=>{const G={...$,body:await _0($.body,Q)},Y=C0($,G.body);switch(Y){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await BG(G,Q);default:const Z=G.body;return B0({output:$,parsedBody:Z,errorCode:Y})}};var k6=async($,Q)=>{if($.statusCode!==200&&$.statusCode>=300)return EG($,Q);const G=q({$metadata:i($),Expiration:[,$.headers["x-amz-expiration"]],ETag:[,$.headers.etag],ChecksumCRC32:[,$.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,$.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,$.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,$.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,$.headers["x-amz-server-side-encryption"]],VersionId:[,$.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,$.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,$.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,$.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,$.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>$.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>d($.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,$.headers["x-amz-request-charged"]]});return await L0($.body,Q),G},EG=async($,Q)=>{const G={...$,body:await _0($.body,Q)},Y=C0($,G.body),Z=G.body;return B0({output:$,parsedBody:Z,errorCode:Y})};var B0=x1(m);var qG=async($,Q)=>{const G=q({}),Y=$.body;if(Y.AccessTier!==void 0)G.AccessTier=E(Y.AccessTier);if(Y.StorageClass!==void 0)G.StorageClass=E(Y.StorageClass);const Z=new A0({$metadata:i($),...G});return n(Z,$.body)},BG=async($,Q)=>{const G=q({}),Y=$.body,Z=new q0({$metadata:i($),...G});return n(Z,$.body)},_G=async($,Q)=>{const G=q({}),Y=$.body,Z=new E0({$metadata:i($),...G});return n(Z,$.body)};var CG=($,Q)=>{return($||[]).filter((G)=>G!=null).map((G)=>{return E(G)})},SG=($,Q)=>{const G={};if($.Prefix!==void 0)G.Prefix=E($.Prefix);return G},fG=($,Q)=>{return($||[]).filter((G)=>G!=null).map((G)=>{return SG(G,Q)})};var OG=($,Q)=>{const G={};if($.Key!==void 0)G.Key=E($.Key);if($.LastModified!==void 0)G.LastModified=s(M0($.LastModified));if($.ETag!==void 0)G.ETag=E($.ETag);if($.ChecksumAlgorithm==="")G.ChecksumAlgorithm=[];else if($.ChecksumAlgorithm!==void 0)G.ChecksumAlgorithm=CG(w0($.ChecksumAlgorithm),Q);if($.Size!==void 0)G.Size=t0($.Size);if($.StorageClass!==void 0)G.StorageClass=E($.StorageClass);if($.Owner!==void 0)G.Owner=jG($.Owner,Q);if($.RestoreStatus!==void 0)G.RestoreStatus=kG($.RestoreStatus,Q);return G},DG=($,Q)=>{return($||[]).filter((G)=>G!=null).map((G)=>{return OG(G,Q)})};var jG=($,Q)=>{const G={};if($.DisplayName!==void 0)G.DisplayName=E($.DisplayName);if($.ID!==void 0)G.ID=E($.ID);return G};var kG=($,Q)=>{const G={};if($.IsRestoreInProgress!==void 0)G.IsRestoreInProgress=d($.IsRestoreInProgress);if($.RestoreExpiryDate!==void 0)G.RestoreExpiryDate=s(M0($.RestoreExpiryDate));return G};var i=($)=>({httpStatusCode:$.statusCode,requestId:$.headers["x-amzn-requestid"]??$.headers["x-amzn-request-id"]??$.headers["x-amz-request-id"],extendedRequestId:$.headers["x-amz-id-2"],cfId:$.headers["x-amz-cf-id"]}),NG=($,Q)=>L0($,Q).then((G)=>Q.utf8Encoder(G)),C=($)=>$!==void 0&&$!==null&&$!==""&&(!Object.getOwnPropertyNames($).includes("length")||$.length!=0)&&(!Object.getOwnPropertyNames($).includes("size")||$.size!=0),N6=($,Q)=>NG($,Q).then((G)=>{if(G.length){const Y=new B6.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(z,U)=>U.trim()===""&&U.includes("\n")?"":void 0});Y.addEntity("#xD","\r"),Y.addEntity("#10","\n");const Z=Y.parse(G),W="#text",J=Object.keys(Z)[0],X=Z[J];if(X[W])X[J]=X[W],delete X[W];return Z8(X)}return{}}),_0=async($,Q)=>{const G=await N6($,Q);if(G.Error)G.Error.message=G.Error.message??G.Error.Message;return G},C0=($,Q)=>{if(Q?.Code!==void 0)return Q.Code;if($.statusCode==404)return"NotFound"};function PG($){return(Q)=>async(G)=>{let Y={...G.input};const Z=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let W of Z){const J=Y[W.target];if(J){const X=ArrayBuffer.isView(J)?new Uint8Array(J.buffer,J.byteOffset,J.byteLength):typeof J==="string"?$.utf8Decoder(J):new Uint8Array(J),z=$.base64Encoder(X),U=new $.md5;U.update(X),Y={...Y,[W.target]:z,[W.hash]:$.base64Encoder(await U.digest())}}}return Q({...G,input:Y})}}var gG={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},S0=($)=>({applyToStack:(Q)=>{Q.add(PG($),gG)}});class f0 extends j{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor($){super();this.input=$}resolveMiddleware($,Q,G){this.middlewareStack.use(N(Q,this.serialize,this.deserialize)),this.middlewareStack.use(P(Q,f0.getEndpointParameterInstructions()));const Y=$.concat(this.middlewareStack),{logger:Z}=Q,X={logger:Z,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:(U)=>U,outputFilterSensitiveLog:(U)=>U},{requestHandler:z}=Q;return Y.resolve((U)=>z.handle(U.request,G||{}),X)}serialize($,Q){return _6($,Q)}deserialize($,Q){return O6($,Q)}}var w;(function($){$.MD5="MD5",$.CRC32="CRC32",$.CRC32C="CRC32C",$.SHA1="SHA1",$.SHA256="SHA256"})(w||(w={}));var P6;(function($){$.HEADER="header",$.TRAILER="trailer"})(P6||(P6={}));var X0=[w.CRC32,w.CRC32C,w.SHA1,w.SHA256],g6=[w.CRC32,w.CRC32C,w.SHA1,w.SHA256];var v6=($,{requestChecksumRequired:Q,requestAlgorithmMember:G})=>{if(!G||!$[G])return Q?w.MD5:void 0;const Y=$[G];if(!X0.includes(Y))throw new Error(`The checksum algorithm "${Y}" is not supported by the client.`+` Select one of ${X0}.`);return Y};var O0=($)=>$===w.MD5?"content-md5":`x-amz-checksum-${$.toLowerCase()}`;var h6=($,Q)=>{const G=$.toLowerCase();for(let Y of Object.keys(Q))if(G===Y.toLowerCase())return!0;return!1};var D0=($)=>$!==void 0&&typeof $!=="string"&&!ArrayBuffer.isView($)&&!T1($);var s6=y0(r0(),1),r6=y0(E8(),1);var j0=($,Q)=>({[w.MD5]:Q.md5,[w.CRC32]:s6.AwsCrc32,[w.CRC32C]:r6.AwsCrc32c,[w.SHA1]:Q.sha1,[w.SHA256]:Q.sha256})[$];var k0=($,Q)=>{const G=new $;return G.update(w1(Q||"")),G.digest()};var i6=async($,{streamHasher:Q,checksumAlgorithmFn:G,base64Encoder:Y})=>{const Z=D0($)?Q(G,$):k0(G,$);return Y(await Z)};var a6=($=[])=>{const Q=[];for(let G of g6){if(!$.includes(G)||!X0.includes(G))continue;Q.push(G)}return Q};var p6=async($,{config:Q,responseAlgorithms:G})=>{const Y=a6(G),{body:Z,headers:W}=$;for(let J of Y){const X=O0(J),z=W[X];if(z){const U=j0(J,Q),{streamHasher:K,base64Encoder:H}=Q,F=await i6(Z,{streamHasher:K,checksumAlgorithmFn:U,base64Encoder:H});if(F===z)break;throw new Error(`Checksum mismatch: expected "${F}" but received "${z}"`+` in response header "${X}".`)}}};var n6=($,Q)=>(G)=>async(Y)=>{if(!S.isInstance(Y.request))return G(Y);const{request:Z}=Y,{body:W,headers:J}=Z,{base64Encoder:X,streamHasher:z}=$,{input:U,requestChecksumRequired:K,requestAlgorithmMember:H}=Q,F=v6(U,{requestChecksumRequired:K,requestAlgorithmMember:H});let I=W,L=J;if(F){const x=O0(F),T=j0(F,$);if(D0(W)){const{getAwsChunkedEncodingStream:k,bodyLengthChecker:H0}=$;I=k(W,{base64Encoder:X,bodyLengthChecker:H0,checksumLocationName:x,checksumAlgorithmFn:T,streamHasher:z}),L={...J,"content-encoding":J["content-encoding"]?`${J["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":J["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":x},delete L["content-length"]}else if(!h6(x,J)){const k=await k0(T,W);L={...J,[x]:X(k)}}}const V=await G({...Y,request:{...Z,headers:L,body:I}}),{requestValidationModeMember:M,responseAlgorithms:_}=Q;if(M&&U[M]==="ENABLED")p6(V.response,{config:$,responseAlgorithms:_});return V};var KY={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},N0=($,Q)=>({applyToStack:(G)=>{G.add(n6($,Q),KY)}});class P0 extends j{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor($){super();this.input=$}resolveMiddleware($,Q,G){this.middlewareStack.use(N(Q,this.serialize,this.deserialize)),this.middlewareStack.use(P(Q,P0.getEndpointParameterInstructions())),this.middlewareStack.use(S0(Q)),this.middlewareStack.use(N0(Q,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}));const Y=$.concat(this.middlewareStack),{logger:Z}=Q,X={logger:Z,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:A6,outputFilterSensitiveLog:T6},{requestHandler:z}=Q;return Y.resolve((U)=>z.handle(U.request,G||{}),X)}serialize($,Q){return C6($,Q)}deserialize($,Q){return D6($,Q)}}class g0 extends j{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor($){super();this.input=$}resolveMiddleware($,Q,G){this.middlewareStack.use(N(Q,this.serialize,this.deserialize)),this.middlewareStack.use(P(Q,g0.getEndpointParameterInstructions()));const Y=$.concat(this.middlewareStack),{logger:Z}=Q,X={logger:Z,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:(U)=>U,outputFilterSensitiveLog:(U)=>U},{requestHandler:z}=Q;return Y.resolve((U)=>z.handle(U.request,G||{}),X)}serialize($,Q){return S6($,Q)}deserialize($,Q){return j6($,Q)}}class v0 extends j{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor($){super();this.input=$}resolveMiddleware($,Q,G){this.middlewareStack.use(N(Q,this.serialize,this.deserialize)),this.middlewareStack.use(P(Q,v0.getEndpointParameterInstructions())),this.middlewareStack.use(l8(Q)),this.middlewareStack.use(S0(Q)),this.middlewareStack.use(N0(Q,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const Y=$.concat(this.middlewareStack),{logger:Z}=Q,X={logger:Z,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:q6,outputFilterSensitiveLog:E6},{requestHandler:z}=Q;return Y.resolve((U)=>z.handle(U.request,G||{}),X)}serialize($,Q){return f6($,Q)}deserialize($,Q){return k6($,Q)}}async function z0($,Q){const G=await crypto.subtle.importKey("raw",typeof $==="string"?_8.encode($):$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return crypto.subtle.sign("HMAC",G,_8.encode(Q))}async function e6($){return crypto.subtle.digest("SHA-256",typeof $==="string"?_8.encode($):$)}var B8=function($){return Array.prototype.map.call(new Uint8Array($),(Q)=>("0"+Q.toString(16)).slice(-2)).join("")},o6=function($){return $.replace(/[!'()*]/g,(Q)=>"%"+Q.charCodeAt(0).toString(16).toUpperCase())},IY=function($,Q){const{hostname:G,pathname:Y}=$;if(G.endsWith(".r2.cloudflarestorage.com"))return["s3","auto"];if(G.endsWith(".backblazeb2.com")){const X=G.match(/^(?:[^.]+\.)?s3\.([^.]+)\.backblazeb2\.com$/);return X!=null?["s3",X[1]]:["",""]}const Z=G.replace("dualstack.","").match(/([^.]+)\.(?:([^.]*)\.)?amazonaws\.com(?:\.cn)?$/);let[W,J]=(Z||["",""]).slice(1,3);if(J==="us-gov")J="us-gov-west-1";else if(J==="s3"||J==="s3-accelerate")J="us-east-1",W="s3";else if(W==="iot")if(G.startsWith("iot."))W="execute-api";else if(G.startsWith("data.jobs.iot."))W="iot-jobs-data";else W=Y==="/mqtt"?"iotdevicegateway":"iotdata";else if(W==="autoscaling"){const X=(Q.get("X-Amz-Target")||"").split(".")[0];if(X==="AnyScaleFrontendService")W="application-autoscaling";else if(X==="AnyScaleScalingPlannerFrontendService")W="autoscaling-plans"}else if(J==null&&W.startsWith("s3-"))J=W.slice(3).replace(/^fips-|^external-1/,""),W="s3";else if(W.endsWith("-fips"))W=W.slice(0,-5);else if(J&&/-\d$/.test(W)&&!/-\d$/.test(J))[W,J]=[J,W];return[FY[W]||W,J]},_8=new TextEncoder,FY={appstream2:"appstream",cloudhsmv2:"cloudhsm",email:"ses",marketplace:"aws-marketplace",mobile:"AWSMobileHubService",pinpoint:"mobiletargeting",queue:"sqs","git-codecommit":"codecommit","mturk-requester-sandbox":"mturk-requester","personalize-runtime":"personalize"},HY=new Set(["authorization","content-type","content-length","user-agent","presigned-expires","expect","x-amzn-trace-id","range","connection"]);class C8{constructor({accessKeyId:$,secretAccessKey:Q,sessionToken:G,service:Y,region:Z,cache:W,retries:J,initRetryMs:X}){if($==null)throw new TypeError("accessKeyId is a required option");if(Q==null)throw new TypeError("secretAccessKey is a required option");this.accessKeyId=$,this.secretAccessKey=Q,this.sessionToken=G,this.service=Y,this.region=Z,this.cache=W||new Map,this.retries=J!=null?J:10,this.initRetryMs=X||50}async sign($,Q){if($ instanceof Request){const{method:Z,url:W,headers:J,body:X}=$;if(Q=Object.assign({method:Z,url:W,headers:J},Q),Q.body==null&&J.has("Content-Type"))Q.body=X!=null&&J.has("X-Amz-Content-Sha256")?X:await $.clone().arrayBuffer();$=W}const G=new u6(Object.assign({url:$},Q,this,Q&&Q.aws)),Y=Object.assign({},Q,await G.sign());delete Y.aws;try{return new Request(Y.url.toString(),Y)}catch(Z){if(Z instanceof TypeError)return new Request(Y.url.toString(),Object.assign({duplex:"half"},Y));throw Z}}async fetch($,Q){for(let G=0;G<=this.retries;G++){const Y=fetch(await this.sign($,Q));if(G===this.retries)return Y;const Z=await Y;if(Z.status<500&&Z.status!==429)return Z;await new Promise((W)=>setTimeout(W,Math.random()*this.initRetryMs*Math.pow(2,G)))}throw new Error("An unknown error occurred, ensure retries is not negative")}}class u6{constructor({method:$,url:Q,headers:G,body:Y,accessKeyId:Z,secretAccessKey:W,sessionToken:J,service:X,region:z,cache:U,datetime:K,signQuery:H,appendSessionToken:F,allHeaders:I,singleEncode:L}){if(Q==null)throw new TypeError("url is a required option");if(Z==null)throw new TypeError("accessKeyId is a required option");if(W==null)throw new TypeError("secretAccessKey is a required option");this.method=$||(Y?"POST":"GET"),this.url=new URL(Q),this.headers=new Headers(G||{}),this.body=Y,this.accessKeyId=Z,this.secretAccessKey=W,this.sessionToken=J;let V,M;if(!X||!z)[V,M]=IY(this.url,this.headers);if(this.service=X||V||"",this.region=z||M||"us-east-1",this.cache=U||new Map,this.datetime=K||(new Date()).toISOString().replace(/[:-]|\.\d{3}/g,""),this.signQuery=H,this.appendSessionToken=F||this.service==="iotdevicegateway",this.headers.delete("Host"),this.service==="s3"&&!this.signQuery&&!this.headers.has("X-Amz-Content-Sha256"))this.headers.set("X-Amz-Content-Sha256","UNSIGNED-PAYLOAD");const _=this.signQuery?this.url.searchParams:this.headers;if(_.set("X-Amz-Date",this.datetime),this.sessionToken&&!this.appendSessionToken)_.set("X-Amz-Security-Token",this.sessionToken);if(this.signableHeaders=["host",...this.headers.keys()].filter((T)=>I||!HY.has(T)).sort(),this.signedHeaders=this.signableHeaders.join(";"),this.canonicalHeaders=this.signableHeaders.map((T)=>T+":"+(T==="host"?this.url.host:(this.headers.get(T)||"").replace(/\s+/g," "))).join("\n"),this.credentialString=[this.datetime.slice(0,8),this.region,this.service,"aws4_request"].join("/"),this.signQuery){if(this.service==="s3"&&!_.has("X-Amz-Expires"))_.set("X-Amz-Expires","86400");_.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),_.set("X-Amz-Credential",this.accessKeyId+"/"+this.credentialString),_.set("X-Amz-SignedHeaders",this.signedHeaders)}if(this.service==="s3")try{this.encodedPath=decodeURIComponent(this.url.pathname.replace(/\+/g," "))}catch(T){this.encodedPath=this.url.pathname}else this.encodedPath=this.url.pathname.replace(/\/+/g,"/");if(!L)this.encodedPath=encodeURIComponent(this.encodedPath).replace(/%2F/g,"/");this.encodedPath=o6(this.encodedPath);const x=new Set;this.encodedSearch=[...this.url.searchParams].filter(([T])=>{if(!T)return!1;if(this.service==="s3"){if(x.has(T))return!1;x.add(T)}return!0}).map((T)=>T.map((k)=>o6(encodeURIComponent(k)))).sort(([T,k],[H0,P8])=>T<H0?-1:T>H0?1:k<P8?-1:k>P8?1:0).map((T)=>T.join("=")).join("&")}async sign(){if(this.signQuery){if(this.url.searchParams.set("X-Amz-Signature",await this.signature()),this.sessionToken&&this.appendSessionToken)this.url.searchParams.set("X-Amz-Security-Token",this.sessionToken)}else this.headers.set("Authorization",await this.authHeader());return{method:this.method,url:this.url,headers:this.headers,body:this.body}}async authHeader(){return["AWS4-HMAC-SHA256 Credential="+this.accessKeyId+"/"+this.credentialString,"SignedHeaders="+this.signedHeaders,"Signature="+await this.signature()].join(", ")}async signature(){const $=this.datetime.slice(0,8),Q=[this.secretAccessKey,$,this.region,this.service].join();let G=this.cache.get(Q);if(!G){const Y=await z0("AWS4"+this.secretAccessKey,$),Z=await z0(Y,this.region),W=await z0(Z,this.service);G=await z0(W,"aws4_request"),this.cache.set(Q,G)}return B8(await z0(G,await this.stringToSign()))}async stringToSign(){return["AWS4-HMAC-SHA256",this.datetime,this.credentialString,B8(await e6(await this.canonicalString()))].join("\n")}async canonicalString(){return[this.method.toUpperCase(),this.encodedPath,this.encodedSearch,this.canonicalHeaders+"\n",this.signedHeaders,await this.hexBodyHash()].join("\n")}async hexBodyHash(){let $=this.headers.get("X-Amz-Content-Sha256")||(this.service==="s3"&&this.signQuery?"UNSIGNED-PAYLOAD":null);if($==null){if(this.body&&typeof this.body!=="string"&&!("byteLength"in this.body))throw new Error("body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header");$=B8(await e6(this.body||""))}return $}}var t6=($,Q)=>{const G=Q.parseFromString($,"text/xml"),Y=G.querySelector("ListBucketResult"),Z=G.querySelectorAll("Contents"),W=G.querySelector("CommonPrefixes");if(Y===null||Z===null)throw new Error("Invalid XML");return{IsTruncated:Y.querySelector("IsTruncated")?.textContent==="true",Contents:Array.from(Z).map((J)=>({ChecksumAlgorithm:J.querySelector("ChecksumAlgorithm")?.textContent,ETag:J.querySelector("ETag")?.textContent,Key:J.querySelector("Key")?.textContent,LastModified:J.querySelector("LastModified")?.textContent,Owner:{DisplayName:J.querySelector("DisplayName")?.textContent,ID:J.querySelector("ID")?.textContent},RestoreStatus:{IsRestoreInProgress:J.querySelector("IsRestoreInProgress")?.textContent,RestoreExpiryDate:J.querySelector("RestoreExpiryDate")?.textContent},Size:J.querySelector("Size")?.textContent,StorageClass:J.querySelector("StorageClass")?.textContent})),Name:G.querySelector("Name")?.textContent,Prefix:G.querySelector("Prefix")?.textContent,Delimiter:G.querySelector("Delimiter")?.textContent,MaxKeys:Number.parseInt(G.querySelector("MaxKeys")?.textContent),CommonPrefixes:Array.from(W?W.querySelectorAll("Prefix"):[],(J)=>({Prefix:J?.textContent})),EncodingType:G.querySelector("EncodingType")?.textContent,KeyCount:Number.parseInt(G.querySelector("KeyCount")?.textContent),ContinuationToken:G.querySelector("ContinuationToken")?.textContent,NextContinuationToken:G.querySelector("NextContinuationToken")?.textContent,StartAfter:G.querySelector("StartAfter")?.textContent}};class S8{client;endpoint;parser;constructor($,Q,G){this.client=$,this.endpoint=Q,this.parser=G}async listObjectV2($){const Q=`${this.endpoint}/${$.input.Bucket}?list-type=2&prefix=${$.input.Prefix}`,Y=await(await this.client.fetch(Q,{})).text();return t6(Y,this.parser)}async putObject($){const Q=`${this.endpoint}/${$.input.Bucket}/${$.input.Key}`,G=await this.client.fetch(Q,{method:"PUT",body:$.input.Body});if(G.status!=200)throw new Error("Failed to put object");return{$metadata:{httpStatusCode:G.status},ETag:G.headers.get("ETag"),...G.headers.get("x-amz-version-id")&&{VersionId:G.headers.get("x-amz-version-id")}}}async deleteObject($){const Q=`${this.endpoint}/${$.input.Bucket}/${$.input.Key}`;return{$metadata:{httpStatusCode:(await this.client.fetch(Q,{method:"DELETE"})).status}}}async getObject($){const Q=`${this.endpoint}/${$.input.Bucket}/${$.input.Key}?${$.input.VersionId?`versionId=${$.input.VersionId}`:""}`,G=await this.client.fetch(Q,{method:"GET",headers:{"If-None-Match":$.input.IfNoneMatch}});if(G.status==304){const Z=new Error;throw Z.name="304",Z}const Y=G.status==404?void 0:await G.json();return{$metadata:{httpStatusCode:G.status},Body:Y,ETag:G.headers.get("ETag"),...G.headers.get("x-amz-version-id")&&{VersionId:G.headers.get("x-amz-version-id")}}}}class K0{key;_vals;_keys;constructor($,Q){if(this.key=$,this._vals=new Map,this._keys=new Map,Q)for(let[G,Y]of Q)this.set(G,Y)}get size(){return this._vals.size}set($,Q){const G=this.key($);return this._vals.set(G,Q),this._keys.set(G,$),this}get($){return this._vals.get(this.key($))}delete($){const Q=this.key($);return this._keys.delete(Q),this._vals.delete(Q)}has($){return this._vals.has(this.key($))}values(){return this._vals.values()}keys(){return this._keys.values()}forEach($){return this._vals.forEach((Q,G,Y)=>$(Q,this._keys.get(G)))}}var f8=()=>`${Date.now()-200}`.padStart(14,"0"),$$=()=>`${Date.now()+200}`.padStart(14,"0");var F0=()=>crypto.randomUUID();var f=($)=>`${$.bucket}/${$.key}`;var j8=Z$(),TY=U$(),AY=K$();var k8={files:{},update:{}};class F${ref;handler;lastVersion;queue=Promise.resolve();constructor($,Q){this.ref=$,this.handler=Q}notify($,Q,G){this.queue=this.queue.then(()=>G).then((Y)=>{if(Q===this.lastVersion)return;else console.log(`${$} NOTIFY ${f(this.ref)} ${Q}`),this.lastVersion=Q,this.handler(Y)})}}class N8{service;ref;subscribers=new Set;poller;cache;pollInProgress=!1;authoritative_key="";authoritative_state=k8;pendingWrites=new Map;writtenOperations=new Map;constructor($,Q,G){this.service=$,this.ref=Q}observeVersionId($){if(this.writtenOperations.has($)){const Q=this.writtenOperations.get($);this.pendingWrites.delete(Q),this.writtenOperations.delete($)}}async get(){return this.getLatest().then(($)=>$||this.cache?.data)}async getLatest(){try{const $=await this.service._getObject({operation:"POLL_TIME",ref:this.ref,ifNoneMatch:this.cache?.etag});if($.$metadata.httpStatusCode===304)return;if($.data===void 0)this.authoritative_key=".";else this.authoritative_key=$.data;const Q=await this.service.s3ClientLite.listObjectV2(new g0({Bucket:this.ref.bucket,Prefix:this.ref.key,StartAfter:this.authoritative_key}));if(Q.Contents===void 0)return this.authoritative_state=k8,this.authoritative_state;for(let Y=Q.Contents.length-1;Y>=0;Y--){const Z=Q.Contents[Y].Key;if(Z==this.ref.key)continue;const W=f8(),J=await this.service._getObject({operation:"LOOK_BACK",ref:{bucket:this.ref.bucket,key:Z}});if(J.data===void 0)throw new Error("empty data");if(J.data.previous<W){this.authoritative_key=J.data.previous,this.authoritative_state=J.data,console.log(`accepts lookback because ${J.data.previous} < ${W}`);break}else console.log(`reject lookback because ${J.data.previous} >= ${W}`)}let G=this.authoritative_state;for(let Y=0;Y<Q.Contents.length;Y++){const Z=Q.Contents[Y].Key;if(Z==this.ref.key)continue;console.log(`step ${Z} from ${this.authoritative_key}`);const W=await this.service._getObject({operation:"SWEEP",ref:{bucket:this.ref.bucket,key:Z}}),J=Z.substring(Z.lastIndexOf("@")+1),X=f8();if(J>=X)console.log(`cannot use ${J} >= ${X} as it could be inflight`);else console.log(`updating authority with settled patch ${J}`),G=j8(G,W.data?.update),this.authoritative_key=Z;this.observeVersionId(J)}return this.authoritative_state=G,G}catch($){if($.name==="NoSuchKey")return this.authoritative_state=k8,this.authoritative_state;else throw $}}async poll(){if(this.pollInProgress)return;if(this.pollInProgress=!0,this.subscriberCount===0&&this.poller)clearInterval(this.poller),this.poller=void 0;if(this.subscriberCount>0&&!this.poller)this.poller=setInterval(()=>this.poll(),this.service.config.pollFrequency);const $=await this.getLatest();if($===void 0){this.pollInProgress=!1;return}this.subscribers.forEach(async(Q)=>{const G=$.files[f(Q.ref)];if(G){const Y=this.service._getObject({operation:"GET_CONTENT",ref:Q.ref,version:G.version});Q.notify(this.service.config.label,G.version,Y.then((Z)=>Z.data))}else if(G===null)Q.notify(this.service.config.label,void 0,Promise.resolve(void 0))}),this.pollInProgress=!1}async updateContent($,Q){this.pendingWrites.set(Q,$);try{const G=await Q,Y=await this.get();Y.previous=this.authoritative_key,Y.update={files:{}};for(let[X,z]of G){const U=f(X);if(z){const K={version:z};Y.update.files[U]=K}else Y.update.files[U]=null}const Z=$$()+"_"+F0().substring(0,2),W=this.ref.key+"@"+Z;await this.service._putObject({operation:"PUT_MANIFEST",ref:{key:W,bucket:this.ref.bucket},value:Y});const J=await this.service._putObject({operation:"PUT_POLL",ref:{key:this.ref.key,bucket:this.ref.bucket},value:this.authoritative_key});return this.writtenOperations.set(Z,Q),this.poll(),J}catch(G){throw console.error(G),this.pendingWrites.delete(Q),G}}async getVersion($){return(await this.get()).files[f($)]?.version}subscribe($,Q){console.log(`SUBSCRIBE ${f($)} ${this.subscriberCount+1}`);const G=new F$($,Q);return this.subscribers.add(G),()=>this.subscribers.delete(G)}get subscriberCount(){return this.subscribers.size}}async function H$($){const Q=(new TextEncoder()).encode($),G=await crypto.subtle.digest("SHA-256",Q);return btoa(String.fromCharCode(...new Uint8Array(G)))}class EY{config;s3ClientLite;manifests=new K0(f);constructor($){this.config={...$,label:$.label||F0().substring(0,3),useChecksum:$.useChecksum===!1?!1:!0,useVersioning:$.useVersioning||!1,pollFrequency:$.pollFrequency||1000,defaultManifest:{bucket:$.defaultManifest?.bucket||$.defaultBucket,key:$.defaultManifest?.key||"manifest.json"}},this.s3ClientLite=new S8(new C8({accessKeyId:this.config.s3Config?.credentials?.accessKeyId,secretAccessKey:this.config.s3Config?.credentials?.secretAccessKey,sessionToken:this.config.s3Config?.credentials?.sessionToken,service:"s3",retries:0}),$.s3Config.endpoint,$.parser||new DOMParser)}getOrCreateManifest($){if(!this.manifests.has($))this.manifests.set($,new N8(this,$));return this.manifests.get($)}async get($,Q={}){const G={...this.config.defaultManifest,...Q.manifest},Y=this.getOrCreateManifest(G),Z={bucket:$.bucket||this.config.defaultBucket||this.config.defaultManifest.bucket,key:typeof $==="string"?$:$.key};let W=!1,J=void 0;for(let[z,U]of Y.pendingWrites)if(U.has(Z))W=!0,J=U.get(Z);if(W)return console.log(`${this.config.label} get (cached) ${f(Z)}`),J;const X=await Y.getVersion(Z);if(X===void 0)return;return(await this._getObject({operation:"GET",ref:Z,version:X})).data}getCache=new K0(($)=>`${$.Bucket}${$.Key}${$.VersionId}${$.IfNoneMatch}`);async _getObject($){let Q;if(this.config.useVersioning)Q={Bucket:$.ref.bucket,Key:$.ref.key,IfNoneMatch:$.ifNoneMatch,...$.version&&{VersionId:$.version}};else Q={Bucket:$.ref.bucket,Key:`${$.ref.key}${$.version?`@${$.version}`:""}`,IfNoneMatch:$.ifNoneMatch};if(this.getCache.has(Q))return await this.getCache.get(Q);const G=this.s3ClientLite.getObject(new P0(Q)).then(async(Y)=>{const Z={...Y,data:Y.Body};return console.log(`${this.config.label} ${$.operation} ${$.ref.bucket}/${$.ref.key}@${$.version} => ${Z.VersionId} ${Z.data}}`),this.getCache.set(Q,G),Z}).catch((Y)=>{if(Y?.name==="304")return{$metadata:{httpStatusCode:304},data:void 0};else throw Y});return G}async delete($,Q={}){return this.putAll(new Map([[$,void 0]]),Q)}async put($,Q,G={}){return this.putAll(new Map([[$,Q]]),G)}async putAll($,Q={}){const G=new K0(f,[...$].map(([Z,W])=>[{bucket:Z.bucket||this.config.defaultBucket||this.config.defaultManifest.bucket,key:typeof Z==="string"?Z:Z.key},W])),Y=(Q?.manifests||[this.config.defaultManifest]).map((Z)=>({...this.config.defaultManifest,...Z}));return this._putAll(G,{manifests:Y})}async _putAll($,Q){const G=new Promise(async(Y,Z)=>{const W=new Map,J=[];$.forEach((X,z)=>{if(X!==void 0){let U=this.config.useVersioning?void 0:F0();J.push(this._putObject({operation:"PUT_CONTENT",ref:z,value:X,version:U}).then((K)=>{if(this.config.useVersioning)if(K.VersionId===void 0)throw console.error(K),Error(`Bucket ${z.bucket} is not version enabled!`);else U=K.VersionId;W.set(z,U)}))}else J.push(this._deleteObject({ref:z}).then((U)=>{W.set(z,void 0)}))}),await Promise.all(J).catch(Z),Y(W)});return Promise.all(Q.manifests.map((Y)=>{return this.getOrCreateManifest(Y).updateContent($,G)}))}async _putObject($){const Q=JSON.stringify($.value,null,2);let G;if(this.config.useVersioning)G={Bucket:$.ref.bucket,Key:$.ref.key,ContentType:"application/json",Body:Q,...this.config.useChecksum&&{ChecksumSHA256:await H$(Q)}};else G={Bucket:$.ref.bucket,Key:`${$.ref.key}${$.version?`@${$.version}`:""}`,ContentType:"application/json",Body:Q,...this.config.useChecksum&&{ChecksumSHA256:await H$(Q)}};const Y=await this.s3ClientLite.putObject(new v0(G));return console.log(`${this.config.label} ${$.operation} ${G.Bucket}/${G.Key} => ${Y.VersionId}`),Y}async _deleteObject($){const Q={Bucket:$.ref.bucket,Key:$.ref.key},G=await this.s3ClientLite.deleteObject(new f0(Q));return console.log(`${this.config.label} DELETE ${$.ref.bucket}/${$.ref.key} => ${G.VersionId}`),G}subscribe($,Q,G){const Y={...this.config.defaultManifest,...G?.manifest},Z={key:$,bucket:G?.bucket||this.config.defaultBucket||Y.bucket},W=this.getOrCreateManifest(Y),J=W.subscribe(Z,Q);return this.get(Z,{manifest:Y}).then((X)=>{console.log(`${this.config.label} NOTIFY (initial) ${f(Z)}`),queueMicrotask(()=>{Q(X),W.poll()})}),J}refresh(){return Promise.all([...this.manifests.values()].map(($)=>$.poll()))}get subscriberCount(){return[...this.manifests.values()].reduce(($,Q)=>$+Q.subscriberCount,0)}}export{EY as MPS3};
